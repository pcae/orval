"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; } function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } } function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }var ln=Object.create;var rt=Object.defineProperty;var un=Object.getOwnPropertyDescriptor;var fn=Object.getOwnPropertyNames;var dn=Object.getPrototypeOf,gn=Object.prototype.hasOwnProperty;var k=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var yn=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),hn=(e,t)=>{for(var r in t)rt(e,r,{get:t[r],enumerable:!0})},bn=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of fn(t))!gn.call(e,o)&&o!==r&&rt(e,o,{get:()=>t[o],enumerable:!(n=un(t,o))||n.enumerable});return e};var On=(e,t,r)=>(r=e!=null?ln(dn(e)):{},bn(t||!e||!e.__esModule?rt(r,"default",{value:e,enumerable:!0}):r,e));var Vr=yn((xe,ue)=>{var io=200,jr="__lodash_hash_undefined__",po=800,mo=16,vr=9007199254740991,Rr="[object Arguments]",co="[object Array]",lo="[object AsyncFunction]",uo="[object Boolean]",fo="[object Date]",go="[object Error]",Tr="[object Function]",yo="[object GeneratorFunction]",ho="[object Map]",bo="[object Number]",Oo="[object Null]",Pr="[object Object]",xo="[object Proxy]",So="[object RegExp]",$o="[object Set]",jo="[object String]",vo="[object Undefined]",Ro="[object WeakMap]",To="[object ArrayBuffer]",Po="[object DataView]",wo="[object Float32Array]",Mo="[object Float64Array]",Go="[object Int8Array]",Co="[object Int16Array]",Eo="[object Int32Array]",Io="[object Uint8Array]",Ao="[object Uint8ClampedArray]",Do="[object Uint16Array]",No="[object Uint32Array]",_o=/[\\^$.*+?()[\]{}|]/g,Fo=/^\[object .+?Constructor\]$/,ko=/^(?:0|[1-9]\d*)$/,j={};j[wo]=j[Mo]=j[Go]=j[Co]=j[Eo]=j[Io]=j[Ao]=j[Do]=j[No]=!0;j[Rr]=j[co]=j[To]=j[uo]=j[Po]=j[fo]=j[go]=j[Tr]=j[ho]=j[bo]=j[Pr]=j[So]=j[$o]=j[jo]=j[Ro]=!1;var wr=typeof global=="object"&&global&&global.Object===Object&&global,Bo=typeof self=="object"&&self&&self.Object===Object&&self,je=wr||Bo||Function("return this")(),Mr=typeof xe=="object"&&xe&&!xe.nodeType&&xe,Se=Mr&&typeof ue=="object"&&ue&&!ue.nodeType&&ue,Gr=Se&&Se.exports===Mr,bt=Gr&&wr.process,dr=function(){try{var e=Se&&Se.require&&Se.require("util").types;return e||bt&&bt.binding&&bt.binding("util")}catch (e2){}}(),gr=dr&&dr.isTypedArray;function Wo(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Vo(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function Uo(e){return function(t){return e(t)}}function qo(e,t){return _optionalChain([e, 'optionalAccess', _2 => _2[t]])}function zo(e,t){return function(r){return e(t(r))}}var Lo=Array.prototype,Ko=Function.prototype,Ue=Object.prototype,Ot=je["__core-js_shared__"],qe=Ko.toString,U=Ue.hasOwnProperty,yr=function(){var e=/[^.]+$/.exec(Ot&&Ot.keys&&Ot.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Cr=Ue.toString,Ho=qe.call(Object),Qo=RegExp("^"+qe.call(U).replace(_o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),We=Gr?je.Buffer:void 0,hr=je.Symbol,br=je.Uint8Array,Or=We?We.allocUnsafe:void 0,Er=zo(Object.getPrototypeOf,Object),xr=Object.create,Jo=Ue.propertyIsEnumerable,Yo=Lo.splice,re=hr?hr.toStringTag:void 0,Ve=function(){try{var e=Rt(Object,"defineProperty");return e({},"",{}),e}catch (e3){}}(),Xo=We?We.isBuffer:void 0,Sr=Math.max,Zo=Date.now,Ir=Rt(je,"Map"),$e=Rt(Object,"create"),es=function(){function e(){}return function(t){if(!oe(t))return{};if(xr)return xr(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function ne(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ts(){this.__data__=$e?$e(null):{},this.size=0}function rs(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function ns(e){var t=this.__data__;if($e){var r=t[e];return r===jr?void 0:r}return U.call(t,e)?t[e]:void 0}function os(e){var t=this.__data__;return $e?t[e]!==void 0:U.call(t,e)}function ss(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=$e&&t===void 0?jr:t,this}ne.prototype.clear=ts;ne.prototype.delete=rs;ne.prototype.get=ns;ne.prototype.has=os;ne.prototype.set=ss;function q(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function as(){this.__data__=[],this.size=0}function is(e){var t=this.__data__,r=ze(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Yo.call(t,r,1),--this.size,!0}function ps(e){var t=this.__data__,r=ze(t,e);return r<0?void 0:t[r][1]}function ms(e){return ze(this.__data__,e)>-1}function cs(e,t){var r=this.__data__,n=ze(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}q.prototype.clear=as;q.prototype.delete=is;q.prototype.get=ps;q.prototype.has=ms;q.prototype.set=cs;function fe(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ls(){this.size=0,this.__data__={hash:new ne,map:new(Ir||q),string:new ne}}function us(e){var t=Ke(this,e).delete(e);return this.size-=t?1:0,t}function fs(e){return Ke(this,e).get(e)}function ds(e){return Ke(this,e).has(e)}function gs(e,t){var r=Ke(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}fe.prototype.clear=ls;fe.prototype.delete=us;fe.prototype.get=fs;fe.prototype.has=ds;fe.prototype.set=gs;function de(e){var t=this.__data__=new q(e);this.size=t.size}function ys(){this.__data__=new q,this.size=0}function hs(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function bs(e){return this.__data__.get(e)}function Os(e){return this.__data__.has(e)}function xs(e,t){var r=this.__data__;if(r instanceof q){var n=r.__data__;if(!Ir||n.length<io-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new fe(n)}return r.set(e,t),this.size=r.size,this}de.prototype.clear=ys;de.prototype.delete=hs;de.prototype.get=bs;de.prototype.has=Os;de.prototype.set=xs;function Ss(e,t){var r=jt(e),n=!r&&$t(e),o=!r&&!n&&_r(e),s=!r&&!n&&!o&&kr(e),a=r||n||o||s,p=a?Vo(e.length,String):[],i=p.length;for(var m in e)(t||U.call(e,m))&&!(a&&(m=="length"||o&&(m=="offset"||m=="parent")||s&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||Dr(m,i)))&&p.push(m);return p}function xt(e,t,r){(r!==void 0&&!He(e[t],r)||r===void 0&&!(t in e))&&vt(e,t,r)}function $s(e,t,r){var n=e[t];(!(U.call(e,t)&&He(n,r))||r===void 0&&!(t in e))&&vt(e,t,r)}function ze(e,t){for(var r=e.length;r--;)if(He(e[r][0],t))return r;return-1}function vt(e,t,r){t=="__proto__"&&Ve?Ve(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var js=Ns();function Le(e){return e==null?e===void 0?vo:Oo:re&&re in Object(e)?_s(e):Us(e)}function $r(e){return ve(e)&&Le(e)==Rr}function vs(e){if(!oe(e)||Ws(e))return!1;var t=Pt(e)?Qo:Fo;return t.test(Ks(e))}function Rs(e){return ve(e)&&Fr(e.length)&&!!j[Le(e)]}function Ts(e){if(!oe(e))return Vs(e);var t=Nr(e),r=[];for(var n in e)n=="constructor"&&(t||!U.call(e,n))||r.push(n);return r}function Ar(e,t,r,n,o){e!==t&&js(t,function(s,a){if(o||(o=new de),oe(s))Ps(e,t,a,r,Ar,n,o);else{var p=n?n(St(e,a),s,a+"",e,t,o):void 0;p===void 0&&(p=s),xt(e,a,p)}},Br)}function Ps(e,t,r,n,o,s,a){var p=St(e,r),i=St(t,r),m=a.get(i);if(m){xt(e,r,m);return}var c=s?s(p,i,r+"",e,t,a):void 0,l=c===void 0;if(l){var u=jt(i),f=!u&&_r(i),d=!u&&!f&&kr(i);c=i,u||f||d?jt(p)?c=p:Hs(p)?c=Is(p):f?(l=!1,c=Gs(i,!0)):d?(l=!1,c=Es(i,!0)):c=[]:Qs(i)||$t(i)?(c=p,$t(p)?c=Js(p):(!oe(p)||Pt(p))&&(c=Fs(i))):l=!1}l&&(a.set(i,c),o(c,i,n,s,a),a.delete(i)),xt(e,r,c)}function ws(e,t){return zs(qs(e,t,Wr),e+"")}var Ms=Ve?function(e,t){return Ve(e,"toString",{configurable:!0,enumerable:!1,value:Xs(t),writable:!0})}:Wr;function Gs(e,t){if(t)return e.slice();var r=e.length,n=Or?Or(r):new e.constructor(r);return e.copy(n),n}function Cs(e){var t=new e.constructor(e.byteLength);return new br(t).set(new br(e)),t}function Es(e,t){var r=t?Cs(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Is(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function As(e,t,r,n){var o=!r;r||(r={});for(var s=-1,a=t.length;++s<a;){var p=t[s],i=n?n(r[p],e[p],p,r,e):void 0;i===void 0&&(i=e[p]),o?vt(r,p,i):$s(r,p,i)}return r}function Ds(e){return ws(function(t,r){var n=-1,o=r.length,s=o>1?r[o-1]:void 0,a=o>2?r[2]:void 0;for(s=e.length>3&&typeof s=="function"?(o--,s):void 0,a&&ks(r[0],r[1],a)&&(s=o<3?void 0:s,o=1),t=Object(t);++n<o;){var p=r[n];p&&e(t,p,n,s)}return t})}function Ns(e){return function(t,r,n){for(var o=-1,s=Object(t),a=n(t),p=a.length;p--;){var i=a[e?p:++o];if(r(s[i],i,s)===!1)break}return t}}function Ke(e,t){var r=e.__data__;return Bs(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Rt(e,t){var r=qo(e,t);return vs(r)?r:void 0}function _s(e){var t=U.call(e,re),r=e[re];try{e[re]=void 0;var n=!0}catch (e4){}var o=Cr.call(e);return n&&(t?e[re]=r:delete e[re]),o}function Fs(e){return typeof e.constructor=="function"&&!Nr(e)?es(Er(e)):{}}function Dr(e,t){var r=typeof e;return t=_nullishCoalesce(t, () => (vr)),!!t&&(r=="number"||r!="symbol"&&ko.test(e))&&e>-1&&e%1==0&&e<t}function ks(e,t,r){if(!oe(r))return!1;var n=typeof t;return(n=="number"?Tt(r)&&Dr(t,r.length):n=="string"&&t in r)?He(r[t],e):!1}function Bs(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Ws(e){return!!yr&&yr in e}function Nr(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Ue;return e===r}function Vs(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}function Us(e){return Cr.call(e)}function qs(e,t,r){return t=Sr(t===void 0?e.length-1:t,0),function(){for(var n=arguments,o=-1,s=Sr(n.length-t,0),a=Array(s);++o<s;)a[o]=n[t+o];o=-1;for(var p=Array(t+1);++o<t;)p[o]=n[o];return p[t]=r(a),Wo(e,this,p)}}function St(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var zs=Ls(Ms);function Ls(e){var t=0,r=0;return function(){var n=Zo(),o=mo-(n-r);if(r=n,o>0){if(++t>=po)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Ks(e){if(e!=null){try{return qe.call(e)}catch (e5){}try{return e+""}catch (e6){}}return""}function He(e,t){return e===t||e!==e&&t!==t}var $t=$r(function(){return arguments}())?$r:function(e){return ve(e)&&U.call(e,"callee")&&!Jo.call(e,"callee")},jt=Array.isArray;function Tt(e){return e!=null&&Fr(e.length)&&!Pt(e)}function Hs(e){return ve(e)&&Tt(e)}var _r=Xo||Zs;function Pt(e){if(!oe(e))return!1;var t=Le(e);return t==Tr||t==yo||t==lo||t==xo}function Fr(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=vr}function oe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function ve(e){return e!=null&&typeof e=="object"}function Qs(e){if(!ve(e)||Le(e)!=Pr)return!1;var t=Er(e);if(t===null)return!0;var r=U.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&qe.call(r)==Ho}var kr=gr?Uo(gr):Rs;function Js(e){return As(e,Br(e))}function Br(e){return Tt(e)?Ss(e,!0):Ts(e)}var Ys=Ds(function(e,t,r,n){Ar(e,t,r,n)});function Xs(e){return function(){return e}}function Wr(e){return e}function Zs(){return!1}ue.exports=Ys});var L={ANGULAR:"angular",AXIOS:"axios",AXIOS_FUNCTIONS:"axios-functions",REACT_QUERY:"react-query",SVELTE_QUERY:"svelte-query",VUE_QUERY:"vue-query"},Pa= exports.OutputMode ={SINGLE:"single",SPLIT:"split",TAGS:"tags",TAGS_SPLIT:"tags-split"},V= exports.Verbs ={POST:"post",PUT:"put",GET:"get",PATCH:"patch",DELETE:"delete",HEAD:"head"},ye= exports.GetterPropType ={PARAM:"param",BODY:"body",QUERY_PARAM:"queryParam",HEADER:"header"},Nt= exports.SchemaType ={integer:"integer",number:"number",string:"string",boolean:"boolean",object:"object",null:"null",array:"array",enum:"enum",unknown:"unknown"};var xn=["number","string","null","unknown","undefined","object","blob"],Re= exports.generalJSTypesWithArray =xn.reduce((e,t)=>(e.push(t,`Array<${t}>`,`${t}[]`),e),[]),_t= exports.VERBS_WITH_BODY =[V.POST,V.PUT,V.PATCH,V.DELETE],Ga= exports.URL_REGEX =/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/;var _lodashisempty = require('lodash.isempty'); var _lodashisempty2 = _interopRequireDefault(_lodashisempty);var _esutils = require('esutils');var _isURL = require('validator/lib/isURL'); var _isURL2 = _interopRequireDefault(_isURL);var b={};hn(b,{basename:()=>An,dirname:()=>In,extname:()=>ct,getSchemaFileName:()=>Fn,getSpecName:()=>_n,isAbsolute:()=>Dn,join:()=>En,joinSafe:()=>Pe,normalizeSafe:()=>we,relativeSafe:()=>Nn,resolve:()=>mt,separator:()=>Jt});var _path = require('path'); var _path2 = _interopRequireDefault(_path);var Te=e=>e.toLowerCase().includes(".yaml")||e.toLowerCase().includes(".yml")?"yaml":"json";var _chalk = require('chalk'); var _chalk2 = _interopRequireDefault(_chalk);var _esbuild = require('esbuild');var _fs = require('fs'); var _fs2 = _interopRequireDefault(_fs);var _globby = require('globby'); var _globby2 = _interopRequireDefault(_globby);var _micromatch = require('micromatch'); var _micromatch2 = _interopRequireDefault(_micromatch);var _debug = require('debug'); var _debug2 = _interopRequireDefault(_debug);var Ft=process.env.ORVAL_DEBUG_FILTER,$n=process.env.DEBUG;function kt(e,t={}){let r=_debug2.default.call(void 0, e),{onlyWhenFocused:n}=t,o=typeof n=="string"?n:e;return(s,...a)=>{Ft&&!s.includes(Ft)||n&&!_optionalChain([$n, 'optionalAccess', _3 => _3.includes, 'call', _4 => _4(o)])||r(s,...a)}}var _readline = require('readline'); var _readline2 = _interopRequireDefault(_readline);var B=console.log,_a= exports.startMessage =({name:e,version:t,description:r})=>B(`\u{1F37B} Start ${_chalk2.default.cyan.bold(e)} ${_chalk2.default.green(`v${t}`)}${r?` - ${r}`:""}`),Fa= exports.errorMessage =e=>B(_chalk2.default.red(e)),ka= exports.mismatchArgsMessage =e=>B(_chalk2.default.yellow(`${e.join(", ")} ${e.length===1?"is":"are"} not defined in your configuration!`)),Ba= exports.createSuccessMessage =e=>B(`\u{1F389} ${e?`${_chalk2.default.green(e)} - `:""}Your OpenAPI spec has been converted into ready to use orval!`),Ut= exports.ibmOpenapiValidatorWarnings =e=>{B(_chalk2.default.yellow("(!) Warnings")),e.forEach(t=>B(_chalk2.default.yellow(`Message : ${t.message}
Path    : ${t.path}`)))},qt= exports.ibmOpenapiValidatorErrors =e=>{B(_chalk2.default.red("(!) Errors")),e.forEach(t=>B(_chalk2.default.red(`Message : ${t.message}
Path    : ${t.path}`)))},nt= exports.LogLevels ={silent:0,error:1,warn:2,info:3},Wt,Vt,ot=0;function jn(){let e=process.stdout.rows-2,t=e>0?`
`.repeat(e):"";console.log(t),_readline2.default.cursorTo(process.stdout,0,0),_readline2.default.clearScreenDown(process.stdout)}function Z(e="info",t={}){let{prefix:r="[vite]",allowClearScreen:n=!0}=t,o=nt[e],s=n&&process.stdout.isTTY&&!process.env.CI?jn:()=>{};function a(m,c,l={}){if(o>=nt[m]){let u=m==="info"?"log":m,f=()=>{if(l.timestamp){let d=m==="info"?_chalk2.default.cyan.bold(r):m==="warn"?_chalk2.default.yellow.bold(r):_chalk2.default.red.bold(r);return`${_chalk2.default.dim(new Date().toLocaleTimeString())} ${d} ${c}`}else return c};m===Wt&&c===Vt?(ot++,s(),console[u](f(),_chalk2.default.yellow(`(x${ot+1})`))):(ot=0,Vt=c,Wt=m,l.clear&&s(),console[u](f()))}}let p=new Set,i={hasWarned:!1,info(m,c){a("info",m,c)},warn(m,c){i.hasWarned=!0,a("warn",m,c)},warnOnce(m,c){p.has(m)||(i.hasWarned=!0,a("warn",m,c),p.add(m))},error(m,c){i.hasWarned=!0,a("error",m,c)},clearScreen(m){o>=nt[m]&&s()}};return i}var v=(e="",{backupFilename:t="filename",extension:r=".ts"}={})=>{let n=Kt(e),o=n?_path.join.call(void 0, e,t+r):e,s=o.replace(/\.[^/.]+$/,""),a=_path.dirname.call(void 0, o),p=_path.basename.call(void 0, o,r[0]!=="."?`.${r}`:r);return{path:o,pathWithoutExtension:s,extension:r,isDirectory:n,dirname:a,filename:p}},zt=kt("orval:file-load"),at=new Map;async function Lt(e,t){let{root:r=process.cwd(),isDefault:n=!0,defaultFileName:o,logLevel:s,alias:a,tsconfig:p,load:i=!0}=_nullishCoalesce(t, () => ({})),m=Date.now(),c,l=!1,u=!1;if(e)c=_path.resolve.call(void 0, e),l=e.endsWith(".ts");else if(o){let y=_path.resolve.call(void 0, r,`${o}.js`);if(_fs2.default.existsSync(y)&&(c=y),!c){let g=_path.resolve.call(void 0, r,`${o}.mjs`);_fs2.default.existsSync(g)&&(c=g,u=!0)}if(!c){let g=_path.resolve.call(void 0, r,`${o}.ts`);_fs2.default.existsSync(g)&&(c=g,l=!0)}}c||(e?Z(s).error(_chalk2.default.red(`File not found => ${e}`)):o?Z(s).error(_chalk2.default.red(`File not found => ${o}.{js,mjs,ts}`)):Z(s).error(_chalk2.default.red("File not found")),process.exit(1));let f=we(c),d=at.get(c);if(d)return{path:f,...d,cached:!0};try{let y;if(!y&&!l&&!u)try{delete k.cache[k.resolve(c)],y=k(c),zt(`cjs loaded in ${Date.now()-m}ms`)}catch(g){if(!new RegExp(["Cannot use import statement","Must use import to load ES Module","Unexpected token","Unexpected identifier"].join("|")).test(g.message))throw g}if(!y){let{code:g}=await Mn(c,u,r||_path.dirname.call(void 0, f),a,_optionalChain([p, 'optionalAccess', _5 => _5.compilerOptions]));i?y=await Gn(c,g,n):y=g,zt(`bundled file loaded in ${Date.now()-m}ms`)}return at.set(c,{file:y}),{path:f,file:y}}catch(y){return at.set(c,{error:y}),{path:f,error:y}}}async function Mn(e,t=!1,r,n,o){let s=await _esbuild.build.call(void 0, {absWorkingDir:process.cwd(),entryPoints:[e],outfile:"out.js",write:!1,platform:"node",bundle:!0,format:t?"esm":"cjs",sourcemap:"inline",metafile:!0,target:"es6",minifyWhitespace:!0,plugins:[...n||_optionalChain([o, 'optionalAccess', _6 => _6.paths])?[{name:"aliasing",setup(p){p.onResolve({filter:/^[\w@][^:]/},async({path:i})=>{if(n){let m=Object.keys(n),c=m.find(l=>i.startsWith(l)||_micromatch2.default.isMatch(i,m));if(c){let l=_micromatch2.default.scan(c),u=_micromatch2.default.scan(n[c]),f=_path.resolve.call(void 0, r,u.base),d=l.base?i.replace(l.base,f):Pe(f,i),g=_path.extname.call(void 0, d)?d:`${d}.ts`;return _fs2.default.existsSync(g)?{path:g}:void 0}}if(_optionalChain([o, 'optionalAccess', _7 => _7.paths])){let m=Object.keys(_optionalChain([o, 'optionalAccess', _8 => _8.paths])),c=m.find(l=>i.startsWith(l)||_micromatch2.default.isMatch(i,m));if(c){let l=_micromatch2.default.scan(c),u=_micromatch2.default.scan(_optionalChain([o, 'optionalAccess', _9 => _9.paths, 'access', _10 => _10[c], 'access', _11 => _11[0]])),f=_path.resolve.call(void 0, r,u.base),d=l.base?i.replace(l.base,f):Pe(f,i),g=_path.extname.call(void 0, d)?d:`${d}.ts`;return _fs2.default.existsSync(g)?{path:g}:void 0}}})}}]:[],{name:"externalize-deps",setup(p){p.onResolve({filter:/.*/},i=>{let m=i.path;if(m[0]!=="."&&!_path.isAbsolute.call(void 0, m))return{external:!0}})}},{name:"replace-import-meta",setup(p){p.onLoad({filter:/\.[jt]s$/},async i=>{let m=await _fs2.default.promises.readFile(i.path,"utf8");return{loader:i.path.endsWith(".ts")?"ts":"js",contents:m.replace(/\bimport\.meta\.url\b/g,JSON.stringify(`file://${i.path}`)).replace(/\b__dirname\b/g,JSON.stringify(_path.dirname.call(void 0, i.path))).replace(/\b__filename\b/g,JSON.stringify(i.path))}})}}]}),{text:a}=s.outputFiles[0];return{code:a,dependencies:s.metafile?Object.keys(s.metafile.inputs):[]}}async function Gn(e,t,r){let n=_path.extname.call(void 0, e),o=k.extensions[n];k.extensions[n]=(p,i)=>{i===e?p._compile(t,i):o(p,i)},delete k.cache[k.resolve(e)];let s=k(e),a=r&&s.__esModule?s.default:s;return k.extensions[n]=o,a}async function ei(e,t){let r=await _globby2.default.call(void 0, e,{cwd:t,absolute:!0});await Promise.all(r.map(n=>_fs2.default.promises.unlink(n)))}var K={},Cn=e=>typeof e=="function",Qt=e=>typeof e=="string"?!0:typeof e=="object"&&e!==null?Object.toString.call(e)=="[object String]":!1;Object.entries(_path2.default).forEach(([e,t])=>{Cn(t)?K[e]=(r=>(...n)=>{n=n.map(s=>Qt(s)?Me(s):s);let o=_path2.default[r](...n);return Qt(o)?Me(o):o})(e):K[e]=t});var{join:En,resolve:mt,extname:ct,dirname:In,basename:An,isAbsolute:Dn}=K;var Nn=(e,t)=>{let r=K.relative(e,t);return we(`.${Jt}${r}`)},_n=(e,t)=>{if(Ge(e)){let r=new URL(t);return e.replace(r.origin,"").replace(v(r.pathname).dirname,"").replace(`.${Te(e)}`,"")}return"/"+K.normalize(K.relative(v(t).dirname,e)).split("../").join("").replace(`.${Te(e)}`,"")},Fn=e=>e.replace(`.${Te(e)}`,"").slice(e.lastIndexOf("/")+1),Jt="/",Me=function(e){return e=e.replace(/\\/g,"/"),e=e.replace(/(?<!^)\/+/g,"/"),e},we=e=>{let t;return e=Me(e),t=K.normalize(e),e.startsWith("./")&&!t.startsWith("./")&&!t.startsWith("..")?t="./"+t:e.startsWith("//")&&!t.startsWith("//")&&(e.startsWith("//./")?t="//."+t:t="/"+t),t},Pe=function(...e){let t=K.join(...e);if(e.length>0){let r=Me(e[0]);r.startsWith("./")&&!t.startsWith("./")&&!t.startsWith("..")?t="./"+t:r.startsWith("//")&&!t.startsWith("//")&&(r.startsWith("//./")?t="//."+t:t="/"+t)}return t};var w=e=>Boolean(e.$ref),Kt= exports.isDirectory =e=>!ct(e);function D(e){return Object.prototype.toString.call(e)==="[object Object]"}function Yt(e){return Object.prototype.toString.call(e)==="[object Module]"}function _(e){return typeof e=="string"}function Xt(e){return typeof e=="number"}function Zt(e){return/^-?\d+$/.test(e)}function he(e){return typeof e=="boolean"}function er(e){return typeof e=="function"}function be(e){return typeof e>"u"}function tr(e){return typeof e===null}function mi(e){if(!D(e))return!1;if(_(e.type)&&Object.values(Nt).includes(e.type))return!0;let t=e.allOf||e.anyOf||e.oneOf;return!!(Array.isArray(t)||D(e.properties))}var rr=e=>Object.values(V).includes(e),ci= exports.isRootKey =(e,t)=>e===t,Bn=/^https?:\/\/\w+(\.\w+)*(:[0-9]+)?(\/.*)?$/,Ge= exports.isUrl =e=>_isURL2.default.call(void 0, e)||Bn.test(e);async function nr(e,t,r){let n=typeof r=="object"?Object.create(r):r;for(let o of e)n=await t(n,o);return n}var lt=function(e,t){return t=t||"",e.replace(/(^|-)/g,"$1\\u"+t).replace(/,/g,"\\u"+t)},Ce=lt("20-26,28-2F,3A-40,5B-60,7B-7E,A0-BF,D7,F7","00"),Ee="a-z"+lt("DF-F6,F8-FF","00"),Oe="A-Z"+lt("C0-D6,D8-DE","00"),Wn="A|An|And|As|At|But|By|En|For|If|In|Of|On|Or|The|To|Vs?\\.?|Via",H={capitalize:new RegExp("(^|["+Ce+"])(["+Ee+"])","g"),pascal:new RegExp("(^|["+Ce+"])+(["+Ee+Oe+"])","g"),fill:new RegExp("["+Ce+"]+(.|$)","g"),sentence:new RegExp('(^\\s*|[\\?\\!\\.]+"?\\s+"?|,\\s+")(['+Ee+"])","g"),improper:new RegExp("\\b("+Wn+")\\b","g"),relax:new RegExp("([^"+Oe+"])(["+Oe+"]*)(["+Oe+"])(?=[^"+Oe+"]|$)","g"),upper:new RegExp("^[^"+Ee+"]+$"),hole:/[^\s]\s[^\s]/,apostrophe:/'/g,room:new RegExp("["+Ce+"]")},Vn=e=>e.replace(H.apostrophe,""),or=String.prototype.toUpperCase,ut=String.prototype.toLowerCase,Ie=(e,t,r=!1)=>(t!=null&&(e=e.replace(H.fill,function(n,o){return o?t+o:""})),r&&(e=Vn(e)),e),Un=(e,t=0)=>ut.call(e.charAt(t))+e.slice(t+1),qn=(e,t,r,n)=>t+" "+(r?r+" ":"")+n,ft=(e,t=!1,r=!1,n=!1)=>{if(e=e==null?"":e+"",!n&&H.upper.test(e)&&(e=ut.call(e)),!t&&!H.hole.test(e)){var o=Ie(e," ");H.hole.test(o)&&(e=o)}return!r&&!H.room.test(e)&&(e=e.replace(H.relax,qn)),e},sr=(e,t,r)=>Ie(ut.call(ft(e,!!t)),t,r),h= exports.pascal =e=>{let t=_optionalChain([e, 'optionalAccess', _12 => _12.startsWith, 'call', _13 => _13("_")]),r=Ie(ft(e,!1,!0).replace(H.pascal,(n,o,s)=>or.call(s)),"",!0);return t?`_${r}`:r},x= exports.camel =e=>{let t=_optionalChain([e, 'optionalAccess', _14 => _14.startsWith, 'call', _15 => _15("_")]),r=Un(h(e),t?1:0);return t?`_${r}`:r},fi= exports.snake =e=>sr(e,"_",!0),Ae= exports.kebab =e=>sr(e,"-",!0),di= exports.upper =(e,t,r)=>Ie(or.call(ft(e,!!t,!1,!0)),t,r);var _compareversions = require('compare-versions');var De=(e,t,r=">=")=>e==="latest"?!0:_compareversions.compare.call(void 0, e.replace(/(\s(.*))/,""),t,r);var Ln="\\*/",dt="*\\/",gt=new RegExp(Ln,"g");function M({description:e,deprecated:t,summary:r},n=!1){let o=(Array.isArray(e)?e.filter(m=>!m.includes("eslint-disable")):[e||""]).map(m=>m.replace(gt,dt)),s=[e,t,r].reduce((m,c)=>c?m+1:m,0);if(!s)return"";let a=s===1&&n,p=Array.isArray(e)?_optionalChain([e, 'access', _16 => _16.find, 'call', _17 => _17(m=>m.includes("eslint-disable")), 'optionalAccess', _18 => _18.replace, 'call', _19 => _19(gt,dt)]):void 0,i=`${p?`/* ${p} */
`:""}/**`;return e&&(a||(i+=`
${n?"  ":""} *`),i+=` ${o.join(`
 * `)}`),t&&(a||(i+=`
${n?"  ":""} *`),i+=" @deprecated"),r&&(a||(i+=`
${n?"  ":""} *`),i+=` @summary ${r.replace(gt,dt)}`),i+=a?" ":`
 ${n?"  ":""}`,i+=`*/
`,i}var ar=async(e,t=process.cwd(),r=!0)=>{if(!e)return e;try{if(_(e)){let o=await Promise.resolve().then(() => require(mt(t,e)));return r&&(D(o)||Yt(o))&&o.default?o.default:o}return Promise.resolve(e)}catch(n){throw`Oups... \u{1F37B}. Path: ${e} => ${n}`}};var Ne=e=>e&&typeof e=="object";function yt(e,t){return!Ne(t)||!Ne(e)?e:Object.entries(t).reduce((r,[n,o])=>{let s=r[n];return Array.isArray(s)&&Array.isArray(o)?r[n]=[...s,...o]:Ne(s)&&Ne(o)?r[n]=yt(s,o):r[n]=o,r},Object.assign({},e))}var vi=(e="",t)=>e?(_nullishCoalesce(e.match(new RegExp(t,"g")), () => ([]))).length:0;var _swagger2openapi = require('swagger2openapi'); var _swagger2openapi2 = _interopRequireDefault(_swagger2openapi);var Mi=async(e,t={},r)=>{try{return new Promise(n=>{!e.openapi&&e.swagger==="2.0"?_swagger2openapi2.default.convertObj(e,t,(o,s)=>{o?(B(_chalk2.default.yellow(`${r}
=> ${o}`)),n(e)):n(s.openapi)}):n(e)})}catch(n){throw`Oups... \u{1F37B}.
Path: ${r}
Parsing Error: ${n}`}};var ir=e=>e.sort((t,r)=>t.default?1:r.default?-1:t.required&&r.required?0:t.required?-1:r.required?1:0);var _lodashget = require('lodash.get'); var _lodashget2 = _interopRequireDefault(_lodashget);var Q=e=>{if(!(be(e)||tr(e)))return _(e)?`'${e}'`:Xt(e)||he(e)||er(e)?`${e}`:Array.isArray(e)?`[${e.map(Q).join(", ")}]`:Object.entries(e).reduce((t,[r,n],o,s)=>{let a=Q(n);return s.length===1?`{ ${r}: ${a}, }`:o?s.length-1===o?t+`${r}: ${a}, }`:t+`${r}: ${a}, `:`{ ${r}: ${a}, `},"")},P= exports.sanitize =(e,t)=>{let{whitespace:r="",underscore:n="",dot:o="",dash:s="",es5keyword:a=!1,es5IdentifierName:p=!1,special:i=!1}=_nullishCoalesce(t, () => ({})),m=e;return i!==!0&&(m=m.replace(/[!"`'#%&,:;<>=@{}~\$\(\)\*\+\/\\\?\[\]\^\|]/g,"")),r!==!0&&(m=m.replace(/[\s]/g,r)),n!==!0&&(m=m.replace(/['_']/g,n)),o!==!0&&(m=m.replace(/[.]/g,o)),s!==!0&&(m=m.replace(/[-]/g,s)),a&&(m=_esutils.keyword.isKeywordES5(m,!0)?`_${m}`:m),p&&(m.match(/^[0-9]/)?m=`N${m}`:m=_esutils.keyword.isIdentifierNameES5(m)?m:`_${m}`),m},Di= exports.toObjectString =(e,t)=>e.length?(t?e.map(n=>_lodashget2.default.call(void 0, n,t)):e).join(`,
    `)+",":"",Jn={0:"zero",1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine"},_e= exports.getNumberWord =e=>e.toString().split("").reduce((r,n)=>r+Jn[n],""),ht= exports.escape =(e,t="'")=>e.replace(t,`\\${t}`);var J=e=>e?!!(_nullishCoalesce(_optionalChain([e, 'optionalAccess', _20 => _20.compilerOptions, 'optionalAccess', _21 => _21.allowSyntheticDefaultImports]), () => (_optionalChain([e, 'optionalAccess', _22 => _22.compilerOptions, 'optionalAccess', _23 => _23.esModuleInterop])))):!0;var _ibmopenapivalidator = require('ibm-openapi-validator'); var _ibmopenapivalidator2 = _interopRequireDefault(_ibmopenapivalidator);var Bi=async e=>{let{errors:t,warnings:r}=await _ibmopenapivalidator2.default.call(void 0, e);r.length&&Ut(r),t.length&&qt(t)};var me=(e,t,r)=>{let n=`export type ${t} = typeof ${t}[keyof typeof ${t}];
`,o=Fe(e,r);return n+=`

`,n+=`// eslint-disable-next-line @typescript-eslint/no-redeclare
`,n+=`export const ${t} = {
${o}} as const;
`,n},Fe= exports.getEnumImplementation =(e,t)=>[...new Set(e.split(" | "))].reduce((r,n,o)=>{let s=_optionalChain([t, 'optionalAccess', _24 => _24[o]]);if(s)return r+`  ${_esutils.keyword.isIdentifierNameES5(s)?s:`'${s}'`}: ${n},
`;let a=n.startsWith("'")?n.slice(1,-1):n;return Zt(a)&&(a=Xn(a)),a.length>1&&(a=P(a,{whitespace:"_",underscore:!0,dash:!0,special:!0})),r+`  ${_esutils.keyword.isIdentifierNameES5(a)?a:`'${a}'`}: ${n},
`},""),Xn=e=>e[0]==="-"?`NUMBER_MINUS_${e.slice(1)}`:e[0]==="+"?`NUMBER_PLUS_${e.slice(1)}`:`NUMBER_${e}`;var lp={schemas:"",responses:"Response",parameters:"Parameter",requestBodies:"Body"},eo=new RegExp("~1","g"),to=(e,t)=>{let r=new URL(t,new URL(e,"resolve://"));if(r.protocol==="resolve:"){let{pathname:n,search:o,hash:s}=r;return n+o+s}return r.toString()},ce= exports.getRefInfo =(e,t)=>{let[r,n]=e.split("#"),o=_optionalChain([n, 'optionalAccess', _25 => _25.slice, 'call', _26 => _26(1), 'access', _27 => _27.split, 'call', _28 => _28("/"), 'access', _29 => _29.map, 'call', _30 => _30(i=>i.replace(eo,"/"))]),s=o?_lodashget2.default.call(void 0, t.override,[...o.slice(0,2),"suffix"],""):"",a=n?o[o.length-1]:b.getSchemaFileName(r);if(!r)return{name:h(a)+s,originalName:a,refPaths:o};let p=Ge(t.specKey)?to(t.specKey,r):b.resolve(v(t.specKey).dirname,r);return{name:h(a)+s,originalName:a,specKey:p,refPaths:o}};var C=(e,t,r=[])=>{if(_optionalChain([e, 'optionalAccess', _31 => _31.schema, 'optionalAccess', _32 => _32.$ref])){let i=C(_optionalChain([e, 'optionalAccess', _33 => _33.schema]),t,r);return{schema:{...e,schema:i.schema},imports:r}}if(!w(e))return{schema:e,imports:r};let{name:n,originalName:o,specKey:s,refPaths:a}=ce(e.$ref,t),p=a?_lodashget2.default.call(void 0, t.specs[s||t.specKey],a):t.specs[s||t.specKey];if(!p)throw`Oups... \u{1F37B}. Ref not found: ${e.$ref}`;return C(p,{...t,specKey:s||t.specKey},[...r,{name:n,specKey:s,schemaName:o}])};var F=({schema:e,name:t,context:r})=>{if(w(e)){let{schema:o,imports:s}=C(e,r),a=s[0],p=a.specKey||(r.specKey!==r.target?r.specKey:void 0),i=!1;return(!t||!_optionalChain([r, 'access', _34 => _34.parents, 'optionalAccess', _35 => _35.includes, 'call', _36 => _36(t)]))&&(i=te({item:o,name:a.name,context:{...r,specKey:p||r.specKey,...t?{parents:[...r.parents||[],t]}:{}}}).hasReadonlyProps),{value:a.name,imports:[{name:a.name,specKey:p,schemaName:a.schemaName}],type:_optionalChain([o, 'optionalAccess', _37 => _37.type])||"object",schemas:[],isEnum:!!_optionalChain([o, 'optionalAccess', _38 => _38.enum]),originalSchema:o,hasReadonlyProps:i,isRef:!0}}return{...te({item:e,name:t,context:r}),originalSchema:e,isRef:!1}};var W=({schema:e,propName:t,combined:r=!1,context:n})=>{let o=F({schema:e,name:t,context:n}),s=M(_nullishCoalesce(o.originalSchema, () => ({})));if(t&&!o.isEnum&&_optionalChain([o, 'optionalAccess', _39 => _39.type])==="object"&&new RegExp(/{|&|\|/).test(o.value))return{value:t,imports:[{name:t}],schemas:[...o.schemas,{name:t,model:`${s}export type ${t} = ${o.value};
`,imports:o.imports}],isEnum:!1,type:"object",originalSchema:o.originalSchema,isRef:o.isRef,hasReadonlyProps:o.hasReadonlyProps};if(t&&o.isEnum&&!r&&!o.isRef){let a=me(o.value,t,_optionalChain([o, 'access', _40 => _40.originalSchema, 'optionalAccess', _41 => _41["x-enumNames"]]));return{value:t,imports:[{name:t}],schemas:[...o.schemas,{name:t,model:s+a,imports:o.imports}],isEnum:!1,type:"enum",originalSchema:o.originalSchema,isRef:o.isRef,hasReadonlyProps:o.hasReadonlyProps}}return o};var cr=({schema:e,name:t,context:r})=>{if(e.items){let n=W({schema:e.items,propName:t+"Item",context:r});return{value:n.value.includes("|")?`(${n.value})[]`:`${n.value}[]`,imports:n.imports,schemas:n.schemas,isEnum:!1,type:"array",isRef:!1,hasReadonlyProps:n.hasReadonlyProps}}else throw new Error("All arrays must have an `items` key define")};var _lodashuniqby = require('lodash.uniqby'); var _lodashuniqby2 = _interopRequireDefault(_lodashuniqby);var lr=["multipart/form-data"],ur=["application/x-www-form-urlencoded"],so=({mediaType:e,propName:t,context:r})=>e.schema?W({schema:e.schema,propName:t,context:r}):void 0,le= exports.getResReqTypes =(e,t,r,n="unknown")=>{let o=e.filter(([s,a])=>Boolean(a)).map(([s,a])=>{if(w(a)){let{schema:p,imports:[{name:i,specKey:m,schemaName:c}]}=C(a,r),[l,u]=_nullishCoalesce(Object.entries(_nullishCoalesce(p.content, () => ({})))[0], () => ([])),f=lr.includes(l),d=ur.includes(l);if(!f&&!d||!_optionalChain([u, 'optionalAccess', _42 => _42.schema]))return[{value:i,imports:[{name:i,specKey:m,schemaName:c}],schemas:[],type:"unknown",isEnum:!1,isRef:!0,hasReadonlyProps:!1,originalSchema:_optionalChain([u, 'optionalAccess', _43 => _43.schema]),key:s,contentType:l}];let y=f?ke({name:i,schemaObject:_optionalChain([u, 'optionalAccess', _44 => _44.schema]),context:{...r,specKey:m||r.specKey},isRef:!0}):void 0,g=d?ke({name:i,schemaObject:_optionalChain([u, 'optionalAccess', _45 => _45.schema]),context:{...r,specKey:m||r.specKey},isUrlEncoded:!0,isRef:!0}):void 0;return[{value:i,imports:[{name:i,specKey:m,schemaName:c}],schemas:[],type:"unknown",isEnum:!1,hasReadonlyProps:!1,formData:y,formUrlEncoded:g,isRef:!0,originalSchema:_optionalChain([u, 'optionalAccess', _46 => _46.schema]),key:s,contentType:l}]}return a.content?Object.entries(a.content).map(([i,m],c,l)=>{let u=s?h(t)+h(s):void 0;u&&l.length>1&&(u=u+h(_e(c+1)));let f=so({mediaType:m,propName:u,context:r});if(!f)return;let d=lr.includes(i),y=ur.includes(i);if(!d&&!y||!u)return{...f,imports:f.imports,contentType:i};let g=d?ke({name:u,schemaObject:m.schema,context:r}):void 0,S=y?ke({name:u,schemaObject:m.schema,context:r,isUrlEncoded:!0}):void 0;return{...f,imports:f.imports,formData:g,formUrlEncoded:S,contentType:i}}).filter(i=>i).map(i=>({...i,key:s})):[{value:n,imports:[],schemas:[],type:n,isEnum:!1,key:s,isRef:!1,hasReadonlyProps:!1,contentType:"application/json"}]});return _lodashuniqby2.default.call(void 0, o.flatMap(s=>s),"value")},ke=({name:e,schemaObject:t,context:r,isUrlEncoded:n,isRef:o})=>{let{schema:s,imports:a}=C(t,r),p=x(!o&&w(t)?a[0].name:e),i=n?"formUrlEncoded":"formData",m=n?`const ${i} = new URLSearchParams();
`:`const ${i} = new FormData();
`;if(s.type==="object"&&s.properties){let c=Object.entries(s.properties).reduce((l,[u,f])=>{let{schema:d}=C(f,r),y="",g=_esutils.keyword.isIdentifierNameES5(u)?`.${u}`:`['${u}']`;d.type==="object"?y=`${i}.append('${u}', JSON.stringify(${p}${g}));
`:d.type==="array"?y=`${p}${g}.forEach(value => ${i}.append('${u}', value));
`:d.type==="number"||d.type==="integer"||d.type==="boolean"?y=`${i}.append('${u}', ${p}${g}.toString())
`:y=`${i}.append('${u}', ${p}${g})
`;let S=_optionalChain([s, 'access', _47 => _47.required, 'optionalAccess', _48 => _48.includes, 'call', _49 => _49(u)]);return d.nullable?S?l+`if(${p}${g} !== null) {
 ${y} }
`:l+`if(${p}${g} !== undefined && ${p}${g} !== null) {
 ${y} }
`:S?l+y:l+`if(${p}${g} !== undefined) {
 ${y} }
`},"");return`${m}${c}`}return s.type==="array"?`${m}${p}.forEach(value => ${i}.append('data', value))
`:s.type==="number"||s.type==="boolean"?`${m}${i}.append('data', ${p}.toString())
`:`${m}${i}.append('data', ${p})
`};var fr=({requestBody:e,operationName:t,context:r,contentType:n})=>{let o=le([[r.override.components.requestBodies.suffix,e]],t,r),s=n?o.filter(u=>{let f=!0,d=!1;return n.include&&(f=n.include.includes(u.contentType)),n.exclude&&(d=n.exclude.includes(u.contentType)),f&&!d}):o,a=s.flatMap(({imports:u})=>u),p=s.flatMap(({schemas:u})=>u),i=s.map(({value:u})=>u).join(" | "),c=s.some(u=>u.hasReadonlyProps)&&i?`NonReadonly<${i}>`:i,l=Re.includes(i.toLowerCase())||s.length>1?x(t)+r.override.components.requestBodies.suffix:x(i);return{originalSchema:e,definition:c,implementation:l,imports:a,schemas:p,...s.length===1?{formData:s[0].formData,formUrlEncoded:s[0].formUrlEncoded,contentType:s[0].contentType}:{formData:"",formUrlEncoded:"",contentType:""}}};var _lodashomit = require('lodash.omit'); var _lodashomit2 = _interopRequireDefault(_lodashomit);var Be=e=>_esutils.keyword.isIdentifierNameES5(e)?e:`'${e}'`;var wt=On(Vr()),Ur=(e,t)=>{if(Array.isArray(e)&&Array.isArray(t))return e.concat(t)},ge=(e,t)=>{if(w(e))return C(e,t).schema;let r=e;if(r.allOf){let n=t.specKey,o=r.allOf.reduce((s,a)=>{if(w(a)){let p=C(a,t);n=p.imports[0].specKey||n,a=p.schema}return(0,wt.default)({},s,a,Ur)},{});return r=(0,wt.default)({},o,r,Ur),r.allOf=void 0,t.specKey=n,ge(r,t)}return _optionalChain([r, 'optionalAccess', _50 => _50.properties])&&Object.keys(_optionalChain([r, 'optionalAccess', _51 => _51.properties])).forEach(n=>{_optionalChain([r, 'optionalAccess', _52 => _52.properties, 'optionalAccess', _53 => _53[n]])&&(r.properties[n]=ge(r.properties[n],t))}),_optionalChain([r, 'optionalAccess', _54 => _54.items])&&(r.items=ge(r.items,t)),r};var qr=({item:e,name:t,context:r,nullable:n})=>{if(w(e)){let{name:o,specKey:s}=ce(e.$ref,r);return{value:o+n,imports:[{name:o,specKey:s}],schemas:[],isEnum:!1,type:"object",isRef:!0,hasReadonlyProps:e.readOnly||!1}}if(e.allOf&&(e=ge(e,r)),e.oneOf||e.anyOf){let o=e.oneOf?"oneOf":"anyOf";return Mt({schema:e,name:t,separator:o,context:r,nullable:n})}if(e.type instanceof Array)return Mt({schema:{anyOf:e.type.map(o=>({type:o}))},name:t,separator:"anyOf",context:r,nullable:n});if(e.properties&&Object.entries(e.properties).length>0)return Object.entries(e.properties).reduce((o,[s,a],p,i)=>{let m=(Array.isArray(e.required)?e.required:[]).includes(s),c="";if(t){let g=s.startsWith("_");c+=h(`${g?"_":""}${t}_${s}`)}let l=_nullishCoalesce(_optionalChain([r, 'access', _55 => _55.specs, 'access', _56 => _56[r.target], 'optionalAccess', _57 => _57.components, 'optionalAccess', _58 => _58.schemas]), () => ({}));Object.keys(l).some(g=>h(g)===c)&&(c=c+"Property"),a=ge(a,r);let f=W({schema:a,propName:c,context:r}),d=e.readOnly||a.readOnly;p||(o.value+="{");let y=M(a,!0);if(o.hasReadonlyProps||=d||!1,o.imports.push(...f.imports),o.value+=`
  ${y?`${y}  `:""}${d?"readonly ":""}${Be(s)}${m?"":"?"}: ${f.value};`,o.schemas.push(...f.schemas),i.length-1===p){if(e.additionalProperties)if(he(e.additionalProperties))o.value+=`
  [key: string]: any;
 }`;else{let g=F({schema:e.additionalProperties,name:t,context:r});o.value+=`
  [key: string]: ${g.value};
}`}else o.value+=`
}`;o.value+=n}return o},{imports:[],schemas:[],value:"",isEnum:!1,type:"object",isRef:!1,schema:{},hasReadonlyProps:!1});if(e.additionalProperties){if(he(e.additionalProperties))return{value:"{ [key: string]: any }"+n,imports:[],schemas:[],isEnum:!1,type:"object",isRef:!1,hasReadonlyProps:e.readOnly||!1};let o=F({schema:e.additionalProperties,name:t,context:r});return{value:`{[key: string]: ${o.value}}`+n,imports:_nullishCoalesce(o.imports, () => ([])),schemas:_nullishCoalesce(o.schemas, () => ([])),isEnum:!1,type:"object",isRef:!1,hasReadonlyProps:o.hasReadonlyProps}}return{value:e.type==="object"?"{ [key: string]: any }":"unknown"+n,imports:[],schemas:[],isEnum:!1,type:"object",isRef:!1,hasReadonlyProps:e.readOnly||!1}};var te=({item:e,name:t,context:r})=>{let n=e.nullable?" | null":"";switch(!e.type&&e.items&&(e.type="array"),e.type){case"number":case"integer":{let o=e.format==="int64"&&r.override.useBigInt?"bigint":"number",s=!1;return e.enum&&(o=e.enum.map(a=>`${a}`).join(" | "),s=!0),{value:o+n,isEnum:s,type:"number",schemas:[],imports:[],isRef:!1,hasReadonlyProps:e.readOnly||!1}}case"boolean":return{value:"boolean"+n,type:"boolean",isEnum:!1,schemas:[],imports:[],isRef:!1,hasReadonlyProps:e.readOnly||!1};case"array":{let{value:o,...s}=cr({schema:e,name:t,context:r});return{value:o+n,...s}}case"string":{let o="string",s=!1;return e.enum&&(o=`'${e.enum.map(a=>_(a)?ht(a):`${a}`).filter(Boolean).join("' | '")}'`,s=!0),e.format==="binary"&&(o="Blob"),r.override.useDates&&(e.format==="date"||e.format==="date-time")&&(o="Date"),{value:o+n,isEnum:s,type:"string",imports:[],schemas:[],isRef:!1,hasReadonlyProps:e.readOnly||!1}}case"null":return{value:"null",isEnum:!1,type:"null",imports:[],schemas:[],isRef:!1,hasReadonlyProps:e.readOnly||!1};case"object":default:{if(e.enum)return{value:`'${e.enum.map(p=>_(p)?ht(p):`${p}`).filter(Boolean).join("' | '")}'`+n,isEnum:!0,type:"string",imports:[],schemas:[],isRef:!1,hasReadonlyProps:e.readOnly||!1};let{value:o,...s}=qr({item:e,name:t,context:r,nullable:n});return{value:o,...s}}}};var ta=({resolvedData:e,resolvedValue:t})=>e.isEnum.every(n=>n)?`${e.values.join(" | ")}${t?` | ${t.value}`:""}`:t?`(${e.values.join(` & ${t.value}) | (`)} & ${t.value})`:e.values.join(" | "),Mt= exports.combineSchemas =({name:e,schema:t,separator:r,context:n,nullable:o})=>{let s=_nullishCoalesce(t[r], () => ([])),a=s.reduce((c,l)=>{let u=e?e+h(r):void 0;u&&c.schemas.length&&(u=u+h(_e(c.schemas.length+1)));let f=W({schema:l,propName:u,combined:!0,context:n});return c.values.push(f.value),c.imports.push(...f.imports),c.schemas.push(...f.schemas),c.isEnum.push(f.isEnum),c.types.push(f.type),c.isRef.push(f.isRef),c.originalSchema.push(f.originalSchema),c.hasReadonlyProps||=f.hasReadonlyProps,c},{values:[],imports:[],schemas:[],isEnum:[],isRef:[],types:[],originalSchema:[],hasReadonlyProps:!1}),p=a.isEnum.every(c=>c),i;t.properties&&(i=te({item:_lodashomit2.default.call(void 0, t,r),name:e,context:n}));let m=ta({resolvedData:a,separator:r,resolvedValue:i});if(p&&e&&s.length>1){let c=`

// eslint-disable-next-line @typescript-eslint/no-redeclare
export const ${h(e)} = ${ra(a)}`;return{value:`typeof ${h(e)}[keyof typeof ${h(e)}] ${o};`+c,imports:a.imports.map(l=>({...l,values:!0})),schemas:a.schemas,isEnum:!1,type:"object",isRef:!1,hasReadonlyProps:a.hasReadonlyProps}}return{value:m+o,imports:i?[...a.imports,...i.imports]:a.imports,schemas:i?[...a.schemas,...i.schemas]:a.schemas,isEnum:!1,type:"object",isRef:!1,hasReadonlyProps:_optionalChain([a, 'optionalAccess', _59 => _59.hasReadonlyProps])||_optionalChain([i, 'optionalAccess', _60 => _60.hasReadonlyProps])||!1}},ra=({values:e,isRef:t,originalSchema:r})=>e.length===1?t[0]?e[0]:`{${Fe(e[0])}} as const`:`{${e.map((o,s)=>{if(t[s])return`...${o},`;let a=_optionalChain([r, 'access', _61 => _61[s], 'optionalAccess', _62 => _62["x-enumNames"]]);return Fe(o,a)}).join("")}} as const`;var zr=(e,t)=>{let r={...e};for(let n of Object.values(r))if(_optionalChain([n, 'access', _63 => _63.discriminator, 'optionalAccess', _64 => _64.mapping])){let{mapping:o,propertyName:s}=n.discriminator;for(let[a,p]of Object.entries(o)){let i;try{let{name:m}=ce(p,t);i=r[m]}catch (e7){i=r[p]}!i||(i.properties={...i.properties,[s]:{type:"string",enum:[a]}},i.required=[..._nullishCoalesce(i.required, () => ([])),s])}}return r};var Lr=(e,t,r)=>e.operationId?e.operationId:h([r,...t.split("/").map(n=>P(n,{dash:!0,underscore:"-",dot:"-",whitespace:"-"}))].join("-"));var Kr=({parameters:e=[],context:t})=>e.reduce((r,n)=>{if(w(n)){let{schema:o,imports:s}=C(n,t);(o.in==="path"||o.in==="query"||o.in==="header")&&r[o.in].push({parameter:o,imports:s})}else(n.in==="query"||n.in==="path"||n.in==="header")&&r[n.in].push({parameter:n,imports:[]});return r},{path:[],query:[],header:[]});var na=e=>{let t,r=[],n=/\{(.*?)\}/g;for(;(t=n.exec(e))!==null;)r.push(t[1]);return r},Hr= exports.getParams =({route:e,pathParams:t=[],operationId:r,context:n})=>na(e).map(s=>{let a=t.find(({parameter:d})=>P(x(d.name),{es5keyword:!0,underscore:!0,dash:!0})===s);if(!a)throw new Error(`The path params ${s} can't be found in parameters (${r})`);let{name:p,required:i=!1,schema:m}=a.parameter,c=P(x(p),{es5keyword:!0});if(!m)return{name:c,definition:`${c}${i?"":"?"}: unknown`,implementation:`${c}${i?"":"?"}: unknown`,default:!1,required:i,imports:[]};let l=F({schema:m,context:{...n,...a.imports.length?{specKey:a.imports[0].specKey}:{}}}),u=`${c}${!i||l.originalSchema.default?"?":""}: ${l.value}`,f=`${c}${!i&&!l.originalSchema.default?"?":""}${l.originalSchema.default?`= ${Q(l.originalSchema.default)}`:`: ${l.value}`}`;return{name:c,definition:u,implementation:f,default:l.originalSchema.default,required:i,imports:l.imports,originalSchema:l.originalSchema}});var Qr=({body:e,queryParams:t,params:r,headers:n})=>{let o={name:e.implementation,definition:`${e.implementation}: ${e.definition}`,implementation:`${e.implementation}: ${e.definition}`,default:!1,required:!0,type:ye.BODY},s={name:"params",definition:`params${_optionalChain([t, 'optionalAccess', _65 => _65.isOptional])?"?":""}: ${_optionalChain([t, 'optionalAccess', _66 => _66.schema, 'access', _67 => _67.name])}`,implementation:`params${_optionalChain([t, 'optionalAccess', _68 => _68.isOptional])?"?":""}: ${_optionalChain([t, 'optionalAccess', _69 => _69.schema, 'access', _70 => _70.name])}`,default:!1,required:be(_optionalChain([t, 'optionalAccess', _71 => _71.isOptional]))?!1:!_optionalChain([t, 'optionalAccess', _72 => _72.isOptional]),type:ye.QUERY_PARAM},a={name:"headers",definition:`headers${_optionalChain([n, 'optionalAccess', _73 => _73.isOptional])?"?":""}: ${_optionalChain([n, 'optionalAccess', _74 => _74.schema, 'access', _75 => _75.name])}`,implementation:`headers${_optionalChain([n, 'optionalAccess', _76 => _76.isOptional])?"?":""}: ${_optionalChain([n, 'optionalAccess', _77 => _77.schema, 'access', _78 => _78.name])}`,default:!1,required:be(_optionalChain([n, 'optionalAccess', _79 => _79.isOptional]))?!1:!_optionalChain([n, 'optionalAccess', _80 => _80.isOptional]),type:ye.HEADER},p=[...r.map(m=>({...m,type:ye.PARAM})),...e.definition?[o]:[],...t?[s]:[],...n?[a]:[]];return ir(p)};var oa=(e,t,r)=>e.map(({parameter:n,imports:o})=>{let{name:s,required:a,schema:p,content:i}=n,m=P(`${h(t)}${h(s)}`,{underscore:"_",whitespace:"_",dash:!0,es5keyword:!0,es5IdentifierName:!0}),c=p||i["application/json"].schema,l=F({schema:c,context:r,name:m}),u=Be(s),f=M(n);if(o.length)return{definition:`${f}${u}${!a||c.default?"?":""}: ${o[0].name};`,imports:o,schemas:[],originalSchema:l.originalSchema};if(l.isEnum&&!l.isRef){let y=m,g=me(l.value,y,_optionalChain([l, 'access', _81 => _81.originalSchema, 'optionalAccess', _82 => _82["x-enumNames"]]));return{definition:`${f}${u}${!a||c.default?"?":""}: ${y};`,imports:[{name:y}],schemas:[...l.schemas,{name:y,model:g,imports:l.imports}],originalSchema:l.originalSchema}}return{definition:`${f}${u}${!a||c.default?"?":""}: ${l.value};`,imports:l.imports,schemas:l.schemas,originalSchema:l.originalSchema}}),Gt= exports.getQueryParams =({queryParams:e=[],operationName:t,context:r,suffix:n="params"})=>{if(!e.length)return;let o=oa(e,t,r),s=o.flatMap(({imports:l})=>l),a=o.flatMap(({schemas:l})=>l),p=`${h(t)}${h(n)}`,i=o.map(({definition:l})=>l).join(`
`),m=e.every(({parameter:l})=>!l.required);return{schema:{name:p,model:`export type ${p} = {
${i}
};
`,imports:s},deps:a,isOptional:m}};var Jr=({responses:e,operationName:t,context:r,contentType:n})=>{if(!e)return{imports:[],definition:{success:"",errors:""},isBlob:!1,types:{success:[],errors:[]},schemas:[],contentTypes:[]};let o=le(Object.entries(e),t,r,"void"),s=n?o.filter(u=>{let f=!0,d=!1;return n.include&&(f=n.include.includes(u.contentType)),n.exclude&&(d=n.exclude.includes(u.contentType)),f&&!d}):o,a=s.reduce((u,f)=>(f.key.startsWith("2")?u.success.push(f):u.errors.push(f),u),{success:[],errors:[]}),p=s.flatMap(({imports:u})=>u),i=s.flatMap(({schemas:u})=>u),m=[...new Set(s.map(({contentType:u})=>u))],c=a.success.map(({value:u,formData:f})=>f?"Blob":u).join(" | "),l=a.errors.map(({value:u})=>u).join(" | ");return{imports:p,definition:{success:c||"unknown",errors:l||"unknown"},isBlob:c==="Blob",types:a,contentTypes:m,schemas:i,originalSchema:e}};var Yr=e=>/[^{]*{[\w*_-]*}.*/.test(e),Xr=e=>{let t=e.match(/([^{]*){?([\w*_-]*)}?(.*)/);if(!_optionalChain([t, 'optionalAccess', _83 => _83.length]))return e;let r=t[1],n=P(x(t[2]),{es5keyword:!0,underscore:!0,dash:!0,dot:!0}),o=Yr(t[3])?Xr(t[3]):t[3];return Yr(e)?`${r}\${${n}}${o}`:`${r}${n}${o}`},Fm= exports.getRoute =e=>e.split("/").reduce((r,n,o)=>!n&&!o?r:n.includes("{")?`${r}/${Xr(n)}`:`${r}/${n}`,"");var ic=(e={},t,r)=>_lodashisempty2.default.call(void 0, e)?[]:Object.entries(e).reduce((n,[o,s])=>{let a=le([[r,s]],o,t,"void"),p=a.flatMap(({imports:f})=>f),i=a.flatMap(({schemas:f})=>f),m=a.map(({value:f})=>f).join(" | "),c=P(`${h(o)}${r}`,{underscore:"_",whitespace:"_",dash:!0,es5keyword:!0,es5IdentifierName:!0}),u=`${M(s)}export type ${c} = ${m||"unknown"};
`;return n.push(...i),c!==m&&n.push({name:c,model:u,imports:p}),n},[]);var _lodashuniq = require('lodash.uniq'); var _lodashuniq2 = _interopRequireDefault(_lodashuniq);var _lodashuniqwith = require('lodash.uniqwith'); var _lodashuniqwith2 = _interopRequireDefault(_lodashuniqwith);var tn=({imports:e=[],target:t,isRootKey:r,specsName:n,specKey:o})=>e.length?_lodashuniqwith2.default.call(void 0, e,(s,a)=>s.name===a.name&&s.default===a.default&&s.specKey===a.specKey).sort().map(({specKey:s,name:a,values:p,alias:i})=>{if(s&&!(o===s)){let c=s!==t?n[s]:"";return!r&&s?`import ${p?"":"type "}{ ${a}${i?` as ${i}`:""} } from '../${b.join(c,x(a))}';`:`import ${p?"":"type "}{ ${a}${i?` as ${i}`:""} } from './${b.join(c,x(a))}';`}return`import ${p?"":"type "}{ ${a}${i?` as ${i}`:""} } from './${x(a)}';`}).join(`
`):"",R= exports.generateMutatorImports =({mutators:e,implementation:t,oneMore:r})=>_lodashuniqwith2.default.call(void 0, e,(o,s)=>o.name===s.name&&o.default===s.default).reduce((o,s)=>{let a=`${r?"../":""}${s.path}`;if(o+=`import ${s.default?s.name:`{ ${s.name} }`} from '${a}';`,o+=`
`,t&&(s.hasErrorType||s.bodyTypeName)){let i="";s.hasErrorType&&t.includes(s.errorTypeName)&&!o.includes(s.errorTypeName)&&(i=s.default?`ErrorType as ${s.errorTypeName}`:s.errorTypeName);let m="";s.bodyTypeName&&t.includes(s.bodyTypeName)&&!o.includes(s.bodyTypeName)&&(m=s.default?`BodyType as ${s.bodyTypeName}`:s.bodyTypeName),(m||i)&&(o+=`import type { ${i}${i&&m?", ":""}${m} } from '${a}';`,o+=`
`)}return o},""),Zr=({deps:e,isAllowSyntheticDefaultImports:t,dependency:r,specsName:n,key:o,onlyTypes:s})=>{let a=e.find(l=>l.default&&(t||!l.syntheticDefaultImport)),p=t?void 0:e.find(l=>l.syntheticDefaultImport),i=_lodashuniq2.default.call(void 0, e.filter(l=>!l.default&&!l.syntheticDefaultImport).map(({name:l,alias:u})=>u?`${l} as ${u}`:l)).join(`,
  `),m="",c=p?`import * as ${p.name} from '${r}';`:"";if(c){if(e.length===1)return c;m+=`${c}
`}return m+=`import ${s?"type ":""}${a?`${a.name}${i?",":""}`:""}${i?`{
  ${i}
}`:""} from '${r}${o!=="default"&&n[o]?`/${n[o]}`:""}'`,m},ia= exports.addDependency =({implementation:e,exports:t,dependency:r,specsName:n,hasSchemaDir:o,isAllowSyntheticDefaultImports:s})=>{let a=t.filter(i=>e.includes(i.alias||i.name));if(!a.length)return;let p=a.reduce((i,m)=>{let c=o&&m.specKey?m.specKey:"default";return m.values&&(s||!m.syntheticDefaultImport)?(i[c]={...i[c],values:[..._nullishCoalesce(_optionalChain([i, 'access', _84 => _84[c], 'optionalAccess', _85 => _85.values]), () => ([])),m]},i):(i[c]={...i[c],types:[..._nullishCoalesce(_optionalChain([i, 'access', _86 => _86[c], 'optionalAccess', _87 => _87.types]), () => ([])),m]},i)},{});return Object.entries(p).map(([i,{values:m,types:c}])=>{let l="";return m&&(l+=Zr({deps:m,isAllowSyntheticDefaultImports:s,dependency:r,specsName:n,key:i,onlyTypes:!1})),c&&(m&&(l+=`
`),l+=Zr({deps:c,isAllowSyntheticDefaultImports:s,dependency:r,specsName:n,key:i,onlyTypes:!0})),l}).join(`
`)},uc= exports.generateDependencyImports =(e,t,r,n,o)=>{let s=t.map(a=>ia({...a,implementation:e,specsName:r,hasSchemaDir:n,isAllowSyntheticDefaultImports:o})).filter(Boolean).join(`
`);return s?s+`
`:""},fc= exports.generateVerbImports =({response:e,body:t,queryParams:r,headers:n,params:o})=>[...e.imports,...t.imports,...r?[{name:r.schema.name}]:[],...n?[{name:n.schema.name}]:[],...o.flatMap(({imports:s})=>s)];var pa=(e,t)=>e+`${t}
`,Y= exports.generateModelsInline =e=>Object.values(e).flatMap(r=>r).sort((r,n)=>r.imports.some(o=>o.name===n.name)?1:-1).reduce((r,{model:n})=>pa(r,n),"");var _acorn = require('acorn');var _fsextra = require('fs-extra'); var _fsextra2 = _interopRequireDefault(_fsextra);var Qe="BodyType",nn=(e,t)=>{let r=v(e),n=v(t.path),{pathWithoutExtension:o}=v(b.relativeSafe(r.dirname,n.path));return o},Ye= exports.generateMutator =async({output:e,mutator:t,name:r,workspace:n,tsconfig:o})=>{if(!t||!e)return;let s=t.default,a=t.name?t.name:`${r}Mutator`,p=t.path,i=await _fsextra2.default.readFile(p,"utf8"),m=i.includes("export type ErrorType")||i.includes("export interface ErrorType"),c=i.includes(`export type ${Qe}`)||i.includes(`export interface ${Qe}`),l=t.default?`${h(r)}ErrorType`:"ErrorType",u=t.default?`${h(r)}${Qe}`:Qe,{file:f,cached:d}=await Lt(p,{isDefault:!1,root:n,alias:t.alias,tsconfig:o,load:!1});if(f){let y=s?"default":t.name,g=la(f,y);g||(Z().error(_chalk2.default.red(`Your mutator file doesn't have the ${y} exported function`)),process.exit(1));let S=nn(e,t),T=t.name?!!t.name.startsWith("use")&&!g.numberOfParams:!g.numberOfParams;return{name:t.name||!T?a:`use${h(a)}`,path:S,default:s,hasErrorType:m,errorTypeName:l,hasSecondArg:T?g.returnNumberOfParams>1:g.numberOfParams>1,hasThirdArg:g.numberOfParams>2,isHook:T,...c?{bodyTypeName:u}:{}}}else{let y=nn(e,t);return d||Z().warn(_chalk2.default.yellow("Failed to parse provided mutator function")),{name:a,path:y,default:s,hasSecondArg:!1,hasThirdArg:!1,isHook:!1,hasErrorType:m,errorTypeName:l,...c?{bodyTypeName:u}:{}}}},la=(e,t)=>{try{let r=_acorn.Parser.parse(e,{ecmaVersion:6}),n=_optionalChain([r, 'optionalAccess', _88 => _88.body, 'optionalAccess', _89 => _89.find, 'call', _90 => _90(s=>{if(s.type==="ExpressionStatement")return _optionalChain([s, 'access', _91 => _91.expression, 'access', _92 => _92.arguments, 'optionalAccess', _93 => _93[1], 'optionalAccess', _94 => _94.properties, 'optionalAccess', _95 => _95.some, 'call', _96 => _96(a=>_optionalChain([a, 'access', _97 => _97.key, 'optionalAccess', _98 => _98.name])===t)])||_optionalChain([s, 'access', _99 => _99.expression, 'access', _100 => _100.left, 'optionalAccess', _101 => _101.property, 'optionalAccess', _102 => _102.name])===t?!0:_optionalChain([s, 'access', _103 => _103.expression, 'access', _104 => _104.right, 'optionalAccess', _105 => _105.properties, 'optionalAccess', _106 => _106.some, 'call', _107 => _107(a=>a.key.name===t)])})]);if(!n)return;if(n.expression.type==="AssignmentExpression"){if(n.expression.right.type==="FunctionExpression"||n.expression.right.type==="ArrowFunctionExpression")return{numberOfParams:n.expression.right.params.length};if(n.expression.right.name)return Je(r,n.expression.right.name);let s=_optionalChain([n, 'access', _108 => _108.expression, 'access', _109 => _109.right, 'optionalAccess', _110 => _110.properties, 'access', _111 => _111.find, 'call', _112 => _112(a=>a.key.name===t)]);return s.value.name?Je(r,s.value.name):s.value.type==="FunctionExpression"||s.value.type==="ArrowFunctionExpression"?{numberOfParams:s.value.params.length}:void 0}let o=n.expression.arguments[1].properties.find(s=>_optionalChain([s, 'access', _113 => _113.key, 'optionalAccess', _114 => _114.name])===t);return Je(r,o.value.body.name)}catch (e8){return}},Je=(e,t)=>{let r=_optionalChain([e, 'optionalAccess', _115 => _115.body, 'optionalAccess', _116 => _116.find, 'call', _117 => _117(s=>{if(s.type==="VariableDeclaration")return s.declarations.find(a=>a.id.name===t);if(s.type==="FunctionDeclaration"&&s.id.name===t)return s})]);if(!r)return;if(r.type==="FunctionDeclaration"){let s=_optionalChain([r, 'access', _118 => _118.body, 'optionalAccess', _119 => _119.body, 'optionalAccess', _120 => _120.find, 'call', _121 => _121(a=>a.type==="ReturnStatement")]);return _optionalChain([s, 'optionalAccess', _122 => _122.argument, 'optionalAccess', _123 => _123.params])?{numberOfParams:r.params.length,returnNumberOfParams:s.argument.params.length}:{numberOfParams:r.params.length}}let n=r.declarations.find(s=>s.id.name===t);if(n.init.name)return Je(e,n.init.name);if(n.init.body.type==="ArrowFunctionExpression")return{numberOfParams:n.init.params.length,returnNumberOfParams:n.init.body.params.length};let o=_optionalChain([n, 'access', _124 => _124.init, 'access', _125 => _125.body, 'optionalAccess', _126 => _126.body, 'optionalAccess', _127 => _127.find, 'call', _128 => _128(s=>s.type==="ReturnStatement")]);return _optionalChain([o, 'optionalAccess', _129 => _129.argument, 'optionalAccess', _130 => _130.params])?{numberOfParams:n.init.params.length,returnNumberOfParams:o.argument.params.length}:{numberOfParams:n.init.params.length}};var ua=(e,t,r)=>t&&e.formData?`
      formData,`:r&&e.formUrlEncoded?`
      formUrlEncoded,`:e.implementation?`
      ${e.implementation},`:"",fa= exports.generateAxiosOptions =({response:e,isExactOptionalPropertyTypes:t,queryParams:r,headers:n,requestOptions:o,hasSignal:s})=>{let a=o!==!1;if(!r&&!n&&!e.isBlob)return a?"options":s?t?"...(signal ? { signal } : {})":"signal":"";let p="";return a||(r&&(p+=`
        params,`),n&&(p+=`
        headers,`),s&&(p+=t?`
        ...(signal ? { signal } : {}),`:`
        signal,`)),e.isBlob&&(!D(o)||!o.hasOwnProperty("responseType"))&&(p+=`
        responseType: 'blob',`),D(o)&&(p+=`
 ${_optionalChain([Q, 'call', _131 => _131(o), 'optionalAccess', _132 => _132.slice, 'call', _133 => _133(1,-1)])}`),a&&(p+=`
    ...options,`,r&&(p+=`
        params: {...params, ...options?.params},`),n&&(p+=`
        headers: {...headers, ...options?.headers},`)),p},Mc= exports.generateOptions =({route:e,body:t,headers:r,queryParams:n,response:o,verb:s,requestOptions:a,isFormData:p,isFormUrlEncoded:i,isAngular:m,isExactOptionalPropertyTypes:c,hasSignal:l})=>{let u=_t.includes(s),f=u?ua(t,p,i):"",d=fa({response:o,queryParams:_optionalChain([n, 'optionalAccess', _134 => _134.schema]),headers:_optionalChain([r, 'optionalAccess', _135 => _135.schema]),requestOptions:a,isExactOptionalPropertyTypes:c,hasSignal:l}),y=d?`{${d}}`:"";return s===V.DELETE?f?`
      \`${e}\`,{${m?"body":"data"}:${f} ${d==="options"?`...${d}`:d}}
    `:`
      \`${e}\`,${d==="options"?d:y}
    `:`
      \`${e}\`,${u?f||"undefined,":""}${d==="options"?d:y}
    `},da= exports.generateBodyMutatorConfig =(e,t,r)=>t&&e.formData?`,
       data: formData`:r&&e.formUrlEncoded?`,
       data: formUrlEncoded`:e.implementation?`,
      data: ${e.implementation}`:"",ga= exports.generateQueryParamsAxiosConfig =(e,t)=>{if(!t&&!e.isBlob)return"";let r="";return t&&(r+=`,
        params`),e.isBlob&&(r+=`,
        responseType: 'blob'`),r},Gc= exports.generateMutatorConfig =({route:e,body:t,headers:r,queryParams:n,response:o,verb:s,isFormData:a,isFormUrlEncoded:p,isBodyVerb:i,hasSignal:m,isExactOptionalPropertyTypes:c})=>{let l=i?da(t,a,p):"",u=ga(o,n),f=t.contentType?`,
      headers: {'Content-Type': '${t.contentType}', ${r?"...headers":""}}`:r?`,
      headers`:"";return`{url: \`${e}\`, method: '${s}'${f}${l}${u}${!i&&m?`, ${c?"...(signal ? { signal }: {})":"signal"}`:""}
    }`},Cc= exports.generateMutatorRequestOptions =(e,t)=>t?D(e)?`{${_optionalChain([Q, 'call', _136 => _136(e), 'optionalAccess', _137 => _137.slice, 'call', _138 => _138(1,-1)])} ...options}`:"options":D(e)?`{${_optionalChain([Q, 'call', _139 => _139(e), 'optionalAccess', _140 => _140.slice, 'call', _141 => _141(1,-1)])}}`:"",Ec= exports.generateFormDataAndUrlEncodedFunction =({body:e,formData:t,formUrlEncoded:r,isFormData:n,isFormUrlEncoded:o})=>n&&e.formData?t?`const formData = ${t.name}(${e.implementation})`:e.formData:o&&e.formUrlEncoded?r?`const formUrlEncoded = ${r.name}(${e.implementation})`:e.formUrlEncoded:"";var Nc=(e={},t,r)=>Object.entries(e).reduce((n,[o,s])=>{let a=P(`${h(o)}${r}`,{underscore:"_",whitespace:"_",dash:!0,es5keyword:!0,es5IdentifierName:!0}),{schema:p,imports:i}=C(s,t);if(p.in!=="query")return n;if(!p.schema||i.length)return n.push({name:a,imports:i.length?[{name:i[0].name,specKey:i[0].specKey,schemaName:i[0].schemaName}]:[],model:`export type ${a} = ${i.length?i[0].name:"unknown"};
`}),n;let m=W({schema:p.schema,propName:a,context:t}),l=`${M(s)}export type ${a} = ${m.value||"unknown"};
`;return n.push(...m.schemas),a!==m.value&&n.push({name:a,model:l,imports:m.imports}),n},[]);var on=({name:e,schema:t,context:r,suffix:n})=>{let o=te({item:t,name:e,context:r}),s=o.value==="{}",a="";a+=M(t),s&&(r.tslint?a+=`// tslint:disable-next-line:no-empty-interface
`:a+=`// eslint-disable-next-line @typescript-eslint/no-empty-interface
`),!Re.includes(o.value)&&!_optionalChain([r, 'optionalAccess', _142 => _142.override, 'optionalAccess', _143 => _143.useTypeOverInterfaces])?a+=`export interface ${e} ${o.value}
`:a+=`export type ${e} = ${o.value};
`;let p=o.imports.filter(i=>i.name!==e);return[...o.schemas,{name:e,model:a,imports:p}]};var Kc=(e={},t,r)=>{if(_lodashisempty2.default.call(void 0, e))return[];let n=zr(e,t);return Object.entries(n).reduce((s,[a,p])=>{let i=P(`${h(a)}${r}`,{underscore:"_",whitespace:"_",dash:!0,es5keyword:!0,es5IdentifierName:!0});if((!p.type||p.type==="object")&&!p.allOf&&!p.oneOf&&!p.anyOf&&!w(p)&&!p.nullable&&!p.enum)return s.push(...on({name:i,schema:p,context:t,suffix:r})),s;{let m=F({schema:p,name:i,context:t}),c="",l=m.imports;if(c+=M(p),m.isEnum&&!m.isRef)c+=me(m.value,i,_optionalChain([m, 'access', _144 => _144.originalSchema, 'optionalAccess', _145 => _145["x-enumNames"]]));else if(i===m.value&&m.isRef){let u=m.imports.find(f=>f.name===i);if(!u)c+=`export type ${i} = ${m.value};
`;else{let f=_optionalChain([u, 'optionalAccess', _146 => _146.specKey])?`${h(b.getSpecName(u.specKey,t.specKey))}${m.value}`:`${m.value}Bis`;c+=`export type ${i} = ${f};
`,l=l.map(d=>d.name===i?{...d,alias:f}:d)}}else c+=`export type ${i} = ${m.value};
`;return s.push(...m.schemas,{name:i,model:c,imports:l}),s}},[])};var ha=async({verb:e,output:t,operation:r,route:n,verbParameters:o=[],context:s})=>{let{responses:a,requestBody:p,parameters:i,tags:m=[],deprecated:c,description:l,summary:u}=r,f=Lr(r,n,e),d=t.override.operations[r.operationId],y=Object.entries(t.override.tags).reduce((Dt,[mn,cn])=>m.includes(mn)?yt(Dt,cn):Dt,{}),g={...t.override,...y,...d},S=_optionalChain([d, 'optionalAccess', _147 => _147.operationName])||_optionalChain([t, 'access', _148 => _148.override, 'optionalAccess', _149 => _149.operationName]),T=S?S(r,n,e):x(f),$=P(T,{es5keyword:!0}),N=Jr({responses:a,operationName:$,context:s,contentType:g.contentType}),O=fr({requestBody:p,operationName:$,context:s,contentType:g.contentType}),I=Kr({parameters:[...o,..._nullishCoalesce(i, () => ([]))],context:s}),G=Gt({queryParams:I.query,operationName:$,context:s}),A=t.headers?await Gt({queryParams:I.header,operationName:$,context:s,suffix:"headers"}):void 0,z=Hr({route:n,pathParams:I.path,operationId:f,context:s}),se=Qr({body:O,queryParams:G,params:z,headers:A}),ae=await Ye({output:t.target,name:$,mutator:_optionalChain([g, 'optionalAccess', _150 => _150.mutator]),workspace:s.workspace,tsconfig:s.tsconfig}),tt=_(_optionalChain([g, 'optionalAccess', _151 => _151.formData]))||D(_optionalChain([g, 'optionalAccess', _152 => _152.formData]))?await Ye({output:t.target,name:$,mutator:g.formData,workspace:s.workspace,tsconfig:s.tsconfig}):void 0,an=_(_optionalChain([g, 'optionalAccess', _153 => _153.formUrlEncoded]))||D(_optionalChain([g, 'optionalAccess', _154 => _154.formUrlEncoded]))?await Ye({output:t.target,name:$,mutator:g.formUrlEncoded,workspace:s.workspace,tsconfig:s.tsconfig}):void 0,pn=M({description:l,deprecated:c,summary:u}),It={verb:e,tags:m,summary:r.summary,operationId:f,operationName:$,response:N,body:O,headers:A,queryParams:G,params:z,props:se,mutator:ae,formData:tt,formUrlEncoded:an,override:g,doc:pn,deprecated:c},At=await ar(_optionalChain([g, 'optionalAccess', _155 => _155.transformer]),s.workspace);return At?At(It):It},Xc= exports.generateVerbsOptions =({verbs:e,input:t,output:r,route:n,context:o})=>nr(ba(e,t.filters),async(s,[a,p])=>{if(rr(a)){let i=await ha({verb:a,output:r,verbParameters:e.parameters,route:n,operation:p,context:o});s.push(i)}return s},[]),ba=(e,t)=>t===void 0||t.tags===void 0?Object.entries(e):Object.entries(e).filter(([r,n])=>_optionalChain([n, 'access', _156 => _156.tags, 'optionalAccess', _157 => _157.some, 'call', _158 => _158(o=>_optionalChain([t, 'access', _159 => _159.tags, 'optionalAccess', _160 => _160.includes, 'call', _161 => _161(o)]))]));var Oa=({schema:{imports:e,model:t},target:r,isRootKey:n,specsName:o,header:s,specKey:a})=>{let p=s;return p+=tn({imports:e.filter(i=>!t.includes(`type ${i.alias||i.name} =`)&&!t.includes(`interface ${i.alias||i.name} {`)),target:r,isRootKey:n,specsName:o,specKey:a}),p+=e.length?`

`:`
`,p+=t,p},xa=(e,t)=>b.join(e,`/${t}.ts`),Sa= exports.writeModelInline =(e,t)=>e+`${t}
`,ul= exports.writeModelsInline =e=>e.reduce((t,{model:r})=>Sa(t,r),""),$a= exports.writeSchema =async({path:e,schema:t,target:r,specKey:n,isRootKey:o,specsName:s,header:a})=>{let p=x(t.name);try{await _fsextra2.default.outputFile(xa(e,p),Oa({schema:t,target:r,isRootKey:o,specsName:s,header:a,specKey:n}))}catch(i){throw`Oups... \u{1F37B}. An Error occurred while writing schema ${p} => ${i}`}},fl= exports.writeSchemas =async({schemaPath:e,schemas:t,target:r,specKey:n,isRootKey:o,specsName:s,header:a})=>{let p=b.join(e,"/index.ts");await _fsextra2.default.ensureFile(p),await Promise.all(t.map(i=>$a({path:e,schema:i,target:r,specKey:n,isRootKey:o,specsName:s,header:a})));try{let m=(await _fsextra2.default.readFile(p)).toString(),c=t.filter(d=>!m.includes(`export * from './${x(d.name)}'`)&&!m.includes(`export * from "./${x(d.name)}"`)).map(d=>`export * from './${x(d.name)}';`),u=[..._nullishCoalesce(_optionalChain([m, 'access', _162 => _162.match, 'call', _163 => _163(/export \* from(.*)('|")/g), 'optionalAccess', _164 => _164.map, 'call', _165 => _165(d=>d+";")]), () => ([])),...c].sort().join(`
`),f=`${a}
${u}`;await _fsextra2.default.writeFile(p,f)}catch(i){throw`Oups... \u{1F37B}. An Error occurred while writing schema index file ${p} => ${i}`}};var X=()=>`
// https://stackoverflow.com/questions/49579094/typescript-conditional-types-filter-out-readonly-properties-pick-only-requir/49579497#49579497
type IfEquals<X, Y, A = X, B = never> = (<T>() => T extends X ? 1 : 2) extends <
T,
>() => T extends Y ? 1 : 2
? A
: B;

type WritableKeys<T> = {
[P in keyof T]-?: IfEquals<
  { [Q in P]: T[P] },
  { -readonly [Q in P]: T[P] },
  P
>;
}[keyof T];

type UnionToIntersection<U> =
  (U extends any ? (k: U)=>void : never) extends ((k: infer I)=>void) ? I : never;
type DistributeReadOnlyOverUnions<T> = T extends any ? NonReadonly<T> : never;

type Writable<T> = Pick<T, WritableKeys<T>>;
type NonReadonly<T> = [T] extends [UnionToIntersection<T>] ? {
  [P in keyof Writable<T>]: T[P] extends object
    ? NonReadonly<NonNullable<T[P]>>
    : T[P];
} : DistributeReadOnlyOverUnions<T>;
`;var Ze=(e,t)=>{let r=Object.values(e.operations).map(({operationName:a})=>a),n=_optionalChain([t, 'optionalAccess', _166 => _166.client])===L.ANGULAR,o=e.title({outputClient:t.client,title:h(e.info.title),customTitleFunc:t.override.title}),s=Object.values(e.operations).reduce((a,p,i,m)=>{if(a.imports.push(...p.imports),a.importsMSW.push(...p.importsMSW),a.implementation+=p.implementation+`
`,a.implementationMSW.function+=p.implementationMSW.function,a.implementationMSW.handler+=p.implementationMSW.handler,p.mutator&&a.mutators.push(p.mutator),p.formData&&a.formData.push(p.formData),p.formUrlEncoded&&a.formUrlEncoded.push(p.formUrlEncoded),p.clientMutators&&a.clientMutators.push(...p.clientMutators),i===m.length-1){let c=a.mutators.some(y=>n?y.hasThirdArg:y.hasSecondArg),l=_nullishCoalesce(_nullishCoalesce(_optionalChain([t, 'access', _167 => _167.packageJson, 'optionalAccess', _168 => _168.dependencies, 'optionalAccess', _169 => _169.typescript]), () => (_optionalChain([t, 'access', _170 => _170.packageJson, 'optionalAccess', _171 => _171.devDependencies, 'optionalAccess', _172 => _172.typescript]))), () => ("4.4.0")),u=De(l,"4.5.0"),f=e.header({outputClient:t.client,isRequestOptions:t.override.requestOptions!==!1,isMutator:c,isGlobalMutator:!!t.override.mutator,provideIn:t.override.angular.provideIn,hasAwaitedType:u,titles:o});a.implementation=f.implementation+a.implementation,a.implementationMSW.handler=f.implementationMSW+a.implementationMSW.handler;let d=e.footer({outputClient:_optionalChain([t, 'optionalAccess', _173 => _173.client]),operationNames:r,hasMutator:!!a.mutators.length,hasAwaitedType:u,titles:o});a.implementation+=d.implementation,a.implementationMSW.handler+=d.implementationMSW}return a},{imports:[],implementation:"",implementationMSW:{function:"",handler:""},importsMSW:[],mutators:[],clientMutators:[],formData:[],formUrlEncoded:[]});return{...s,implementationMSW:s.implementationMSW.function+s.implementationMSW.handler}};var wl=async({builder:e,output:t,specsName:r,header:n,needSchema:o})=>{try{let{path:s,dirname:a}=v(t.target,{backupFilename:x(e.info.title)}),{imports:p,importsMSW:i,implementation:m,implementationMSW:c,mutators:l,clientMutators:u,formData:f,formUrlEncoded:d}=Ze(e,t),y=n,g=t.schemas?b.relativeSafe(a,v(t.schemas).dirname):void 0,S=J(t.tsconfig);return y+=e.imports({client:t.client,implementation:m,imports:g?[{exports:p.filter(T=>!i.some($=>T.name===$.name)),dependency:g}]:[],specsName:r,hasSchemaDir:!!t.schemas,isAllowSyntheticDefaultImports:S,hasGlobalMutator:!!t.override.mutator,packageJson:t.packageJson}),t.mock&&(y+=e.importsMock({implementation:c,imports:g?[{exports:i,dependency:g}]:[],specsName:r,hasSchemaDir:!!t.schemas,isAllowSyntheticDefaultImports:S})),l&&(y+=R({mutators:l,implementation:m})),u&&(y+=R({mutators:u})),f&&(y+=R({mutators:f})),d&&(y+=R({mutators:d})),m.includes("NonReadonly<")&&(y+=X(),y+=`
`),!t.schemas&&o&&(y+=Y(e.schemas)),y+=`

${m}`,t.mock&&(y+=`

`,y+=c),await _fsextra2.default.outputFile(s,y),[s]}catch(s){throw`Oups... \u{1F37B}. An Error occurred while writing file => ${s}`}};var _l=async({builder:e,output:t,specsName:r,header:n,needSchema:o})=>{try{let{filename:s,dirname:a,extension:p}=v(t.target,{backupFilename:x(e.info.title)}),{imports:i,implementation:m,implementationMSW:c,importsMSW:l,mutators:u,clientMutators:f,formData:d,formUrlEncoded:y}=Ze(e,t),g=n,S=n,T=t.schemas?b.relativeSafe(a,v(t.schemas).dirname):"./"+s+".schemas",$=J(t.tsconfig);g+=e.imports({client:t.client,implementation:m,imports:[{exports:i,dependency:T}],specsName:r,hasSchemaDir:!!t.schemas,isAllowSyntheticDefaultImports:$,hasGlobalMutator:!!t.override.mutator,packageJson:t.packageJson}),S+=e.importsMock({implementation:c,imports:[{exports:l,dependency:T}],specsName:r,hasSchemaDir:!!t.schemas,isAllowSyntheticDefaultImports:$});let N=t.schemas?void 0:b.join(a,s+".schemas"+p);if(N&&o){let A=n+Y(e.schemas);await _fsextra2.default.outputFile(b.join(a,s+".schemas"+p),A)}u&&(g+=R({mutators:u,implementation:m})),f&&(g+=R({mutators:f})),d&&(g+=R({mutators:d})),y&&(g+=R({mutators:y})),m.includes("NonReadonly<")&&(g+=X()),g+=`
${m}`,S+=`
${c}`;let O=s+(L.ANGULAR===t.client?".service":"")+p,I=b.join(a,O);await _fsextra2.default.outputFile(b.join(a,O),g);let G=t.mock?b.join(a,s+".msw"+p):void 0;return G&&await _fsextra2.default.outputFile(G,S),[I,...N?[N]:[],...G?[G]:[]]}catch(s){throw`Oups... \u{1F37B}. An Error occurred while splitting => ${s}`}};var va=e=>({...e,tags:e.tags.length?e.tags:["default"]}),Ra=(e,t)=>t.tags.map(Ae).reduce((r,n)=>{let o=r[n];return o?(r[n]={implementation:o.implementation+t.implementation,imports:[...o.imports,...t.imports],importsMSW:[...o.importsMSW,...t.importsMSW],implementationMSW:{function:o.implementationMSW.function+t.implementationMSW.function,handler:o.implementationMSW.handler+t.implementationMSW.handler},mutators:t.mutator?[..._nullishCoalesce(o.mutators, () => ([])),t.mutator]:o.mutators,clientMutators:t.clientMutators?[..._nullishCoalesce(o.clientMutators, () => ([])),...t.clientMutators]:o.clientMutators,formData:t.formData?[..._nullishCoalesce(o.formData, () => ([])),t.formData]:o.formData,formUrlEncoded:t.formUrlEncoded?[..._nullishCoalesce(o.formUrlEncoded, () => ([])),t.formUrlEncoded]:o.formUrlEncoded},r):(r[n]={imports:t.imports,importsMSW:t.importsMSW,mutators:t.mutator?[t.mutator]:[],clientMutators:_nullishCoalesce(t.clientMutators, () => ([])),formData:t.formData?[t.formData]:[],formUrlEncoded:t.formUrlEncoded?[t.formUrlEncoded]:[],implementation:t.implementation,implementationMSW:{function:t.implementationMSW.function,handler:t.implementationMSW.handler}},r)},e),et= exports.generateTargetForTags =(e,t)=>{let r=t.client===L.ANGULAR,n=Object.values(e.operations).map(va).reduce((o,s,a,p)=>{let i=Ra(o,s);return a===p.length-1?Object.entries(i).reduce((m,[c,l])=>{let u=!!_optionalChain([l, 'access', _174 => _174.mutators, 'optionalAccess', _175 => _175.some, 'call', _176 => _176($=>r?$.hasThirdArg:$.hasSecondArg)]),f=Object.values(e.operations).filter(({tags:$})=>$.includes(c)).map(({operationName:$})=>$),d=_nullishCoalesce(_nullishCoalesce(_optionalChain([t, 'access', _177 => _177.packageJson, 'optionalAccess', _178 => _178.dependencies, 'optionalAccess', _179 => _179.typescript]), () => (_optionalChain([t, 'access', _180 => _180.packageJson, 'optionalAccess', _181 => _181.devDependencies, 'optionalAccess', _182 => _182.typescript]))), () => ("4.4.0")),y=De(d,"4.5.0"),g=e.title({outputClient:t.client,title:h(c),customTitleFunc:t.override.title}),S=e.footer({outputClient:_optionalChain([t, 'optionalAccess', _183 => _183.client]),operationNames:f,hasMutator:!!_optionalChain([l, 'access', _184 => _184.mutators, 'optionalAccess', _185 => _185.length]),hasAwaitedType:y,titles:g}),T=e.header({outputClient:t.client,isRequestOptions:t.override.requestOptions!==!1,isMutator:u,isGlobalMutator:!!t.override.mutator,provideIn:t.override.angular.provideIn,hasAwaitedType:y,titles:g});return m[c]={implementation:T.implementation+l.implementation+S.implementation,implementationMSW:{function:l.implementationMSW.function,handler:T.implementationMSW+l.implementationMSW.handler+S.implementationMSW},imports:l.imports,importsMSW:l.importsMSW,mutators:l.mutators,clientMutators:l.clientMutators,formData:l.formData,formUrlEncoded:l.formUrlEncoded},m},{}):i},{});return Object.entries(n).reduce((o,[s,a])=>(o[s]={...a,implementationMSW:a.implementationMSW.function+a.implementationMSW.handler},o),{})};var eu=async({builder:e,output:t,specsName:r,header:n,needSchema:o})=>{let{filename:s,dirname:a,extension:p}=v(t.target,{backupFilename:x(e.info.title)}),i=et(e,t),m=J(t.tsconfig);return(await Promise.all(Object.entries(i).map(async([l,u])=>{try{let{imports:f,implementation:d,implementationMSW:y,importsMSW:g,mutators:S,clientMutators:T,formData:$,formUrlEncoded:N}=u,O=n,I=n,G=t.schemas?"../"+b.relativeSafe(a,v(t.schemas).dirname):"../"+s+".schemas";O+=e.imports({client:t.client,implementation:d,imports:[{exports:f,dependency:G}],specsName:r,hasSchemaDir:!!t.schemas,isAllowSyntheticDefaultImports:m,hasGlobalMutator:!!t.override.mutator,packageJson:t.packageJson}),I+=e.importsMock({implementation:y,imports:[{exports:g,dependency:G}],specsName:r,hasSchemaDir:!!t.schemas,isAllowSyntheticDefaultImports:m});let A=t.schemas?void 0:b.join(a,s+".schemas"+p);if(A&&o){let tt=n+Y(e.schemas);await _fsextra2.default.outputFile(A,tt)}S&&(O+=R({mutators:S,implementation:d,oneMore:!0})),T&&(O+=R({mutators:T,oneMore:!0})),$&&(O+=R({mutators:$,oneMore:!0})),N&&(O+=R({mutators:N,oneMore:!0})),d.includes("NonReadonly<")&&(O+=X(),O+=`
`),O+=`
${d}`,I+=`
${y}`;let z=l+(L.ANGULAR===t.client?".service":"")+p,se=b.join(a,l,z);await _fsextra2.default.outputFile(se,O);let ae=t.mock?b.join(a,l,l+".msw"+p):void 0;return ae&&await _fsextra2.default.outputFile(ae,I),[se,...A?[A]:[],...ae?[ae]:[]]}catch(f){throw`Oups... \u{1F37B}. An Error occurred while splitting tag ${l} => ${f}`}}))).flatMap(l=>l)};var iu=async({builder:e,output:t,specsName:r,header:n,needSchema:o})=>{let{filename:s,dirname:a,extension:p}=v(t.target,{backupFilename:x(e.info.title)}),i=et(e,t),m=J(t.tsconfig);return(await Promise.all(Object.entries(i).map(async([l,u])=>{try{let{imports:f,implementation:d,implementationMSW:y,importsMSW:g,mutators:S,clientMutators:T,formData:$,formUrlEncoded:N}=u,O=n,I=t.schemas?b.relativeSafe(a,v(t.schemas).dirname):"./"+s+".schemas";O+=e.imports({client:t.client,implementation:d,imports:[{exports:f.filter(z=>!g.some(se=>z.name===se.name)),dependency:I}],specsName:r,hasSchemaDir:!!t.schemas,isAllowSyntheticDefaultImports:m,hasGlobalMutator:!!t.override.mutator,packageJson:t.packageJson}),t.mock&&(O+=e.importsMock({implementation:y,imports:[{exports:g,dependency:I}],specsName:r,hasSchemaDir:!!t.schemas,isAllowSyntheticDefaultImports:m}));let G=t.schemas?void 0:b.join(a,s+".schemas"+p);if(G&&o){let z=n+Y(e.schemas);await _fsextra2.default.outputFile(G,z)}S&&(O+=R({mutators:S,implementation:d})),T&&(O+=R({mutators:T})),$&&(O+=R({mutators:$})),N&&(O+=R({mutators:N})),O+=`

`,d.includes("NonReadonly<")&&(O+=X(),O+=`
`),O+=d,t.mock&&(O+=`

`,O+=y);let A=b.join(a,`${Ae(l)}${p}`);return await _fsextra2.default.outputFile(A,O),[A,...G?[G]:[]]}catch(f){throw`Oups... \u{1F37B}. An Error occurred while writing tag ${l} => ${f}`}}))).flatMap(l=>l)};exports.BODY_TYPE_NAME = Qe; exports.GetterPropType = ye; exports.LogLevels = nt; exports.OutputClient = L; exports.OutputMode = Pa; exports.RefComponentSuffix = lp; exports.SchemaType = Nt; exports.URL_REGEX = Ga; exports.VERBS_WITH_BODY = _t; exports.Verbs = V; exports.addDependency = ia; exports.asyncReduce = nr; exports.camel = x; exports.combineSchemas = Mt; exports.compareVersions = De; exports.count = vi; exports.createDebugger = kt; exports.createLogger = Z; exports.createSuccessMessage = Ba; exports.dynamicImport = ar; exports.errorMessage = Fa; exports.escape = ht; exports.generalJSTypes = xn; exports.generalJSTypesWithArray = Re; exports.generateAxiosOptions = fa; exports.generateBodyMutatorConfig = da; exports.generateBodyOptions = ua; exports.generateComponentDefinition = ic; exports.generateDependencyImports = uc; exports.generateFormDataAndUrlEncodedFunction = Ec; exports.generateImports = tn; exports.generateModelInline = pa; exports.generateModelsInline = Y; exports.generateMutator = Ye; exports.generateMutatorConfig = Gc; exports.generateMutatorImports = R; exports.generateMutatorRequestOptions = Cc; exports.generateOptions = Mc; exports.generateParameterDefinition = Nc; exports.generateQueryParamsAxiosConfig = ga; exports.generateSchemasDefinition = Kc; exports.generateTarget = Ze; exports.generateTargetForTags = et; exports.generateVerbImports = fc; exports.generateVerbsOptions = Xc; exports.getArray = cr; exports.getBody = fr; exports.getEnum = me; exports.getEnumImplementation = Fe; exports.getExtension = Te; exports.getFileInfo = v; exports.getKey = Be; exports.getNumberWord = _e; exports.getObject = qr; exports.getOperationId = Lr; exports.getOrvalGeneratedTypes = X; exports.getParameters = Kr; exports.getParams = Hr; exports.getParamsInPath = na; exports.getProps = Qr; exports.getQueryParams = Gt; exports.getRefInfo = ce; exports.getResReqTypes = le; exports.getResponse = Jr; exports.getRoute = Fm; exports.getScalar = te; exports.ibmOpenapiValidator = Bi; exports.ibmOpenapiValidatorErrors = qt; exports.ibmOpenapiValidatorWarnings = Ut; exports.isBoolean = he; exports.isDirectory = Kt; exports.isFunction = er; exports.isModule = Yt; exports.isNull = tr; exports.isNumber = Xt; exports.isNumeric = Zt; exports.isObject = D; exports.isReference = w; exports.isRootKey = ci; exports.isSchema = mi; exports.isString = _; exports.isSyntheticDefaultImportsAllow = J; exports.isUndefined = be; exports.isUrl = Ge; exports.isVerb = rr; exports.jsDoc = M; exports.kebab = Ae; exports.loadFile = Lt; exports.log = B; exports.mergeDeep = yt; exports.mismatchArgsMessage = ka; exports.openApiConverter = Mi; exports.pascal = h; exports.removeFiles = ei; exports.resolveDiscriminators = zr; exports.resolveObject = W; exports.resolveRef = C; exports.resolveValue = F; exports.sanitize = P; exports.snake = fi; exports.sortByPriority = ir; exports.startMessage = _a; exports.stringify = Q; exports.toObjectString = Di; exports.upath = b; exports.upper = di; exports.writeModelInline = Sa; exports.writeModelsInline = ul; exports.writeSchema = $a; exports.writeSchemas = fl; exports.writeSingleMode = wl; exports.writeSplitMode = _l; exports.writeSplitTagsMode = eu; exports.writeTagsMode = iu;
